"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[70],{49702:(e,t,i)=>{const{registerComponent:n}=i(90876),o=i(20171),r=i(63514),{accordionItemClicked:s,accordionItemVideoMetricsChanged:a}=i(48318);n("accordion",{component:o,actions:{accordionItemClicked:s,accordionItemVideoMetricsChanged:a},reducer:r,trackingMap:i(91362)})},48318:(e,t)=>{t.ACCORDION_ITEM_CLICKED="ACCORDION_ITEM_CLICKED",t.ACCORDION_ITEM_VIDEO_METRICS="ACCORDION_ITEM_VIDEO_METRICS",t.accordionItemClicked=e=>({type:t.ACCORDION_ITEM_CLICKED,payload:e}),t.accordionItemVideoMetricsChanged=e=>({type:t.ACCORDION_ITEM_VIDEO_METRICS,payload:e})},20171:(e,t,i)=>{const n=i(72579),o=i(16760),r=i(58335),{bool:s,func:a,object:c}=i(13980),d=i(2784),l=i(72779),{Component:p}=i(58720),u=i(96235),m=i(88934),h=i(43855),f=i(90993),v=r({displayName:"Accordion",propTypes:{component:c.isRequired,accordionItemClicked:a.isRequired,accordionItemVideoMetricsChanged:a.isRequired,setComponentAsReady:a.isRequired,setComponentAsViewed:a.isRequired,setComponentAsStarted:a.isRequired,setComponentAsComplete:a.isRequired,styles:c,theme:c.isRequired,animationEnded:s},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps(e){e.component._isComplete||e.component._items.filter((e=>e._isVisited)).length===e.component._items.length&&this.props.setComponentAsComplete(this.props.component._id)},onItemClicked(e){const{props:t}=this;t.component._hasStarted||t.setComponentAsStarted(t.component._id),t.accordionItemClicked({componentId:t.component._id,itemId:e})},onItemVideoMetricsChanged(e,t){const{component:i,accordionItemVideoMetricsChanged:n}=this.props;n({componentId:i._id,itemId:e,metrics:t})},onVisibilityChange(...e){h(...e,this,this.props.setComponentAsViewed)},getClassName(){const{component:e,theme:t}=this.props,i=n(t,"_components._accordion._settings",{});return l(u(e),{"ev-is-icon-right-side":i._isIconOnRightSide,"ev-is-collapsed":i._isItemSpacingCollapsed})},render(){const{props:e}=this;return d.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:m(e),onVisibilityChange:this.onVisibilityChange},d.createElement("div",{className:this.getClassName()},d.createElement("div",{className:"ev-accordion-items"},o(e.component._items,(t=>d.createElement(f,{key:t._id,item:t,componentId:e.component._id,shouldShowCheckIcon:e.component._shouldShowCheckIcon,onItemClicked:this.onItemClicked,onItemVideoMetricsChanged:this.onItemVideoMetricsChanged,animationEnded:e.animationEnded}))))))}});e.exports=v},90993:(e,t,i)=>{const n=i(58335),{bool:o,func:r,object:s,string:a}=i(13980),c=i(2784),d=i(72779),l=i(70913),p=i(69610),u=i(78435),{Collapse:m}=i(98452),h=i(88078),f=i(32823),v=i(89793),_=i(28739),y=i(50085),g=i(11865),C=i(42451),b=i(10817),I=n({displayName:"AccordionItem",propTypes:{item:s.isRequired,onItemClicked:r.isRequired,onItemVideoMetricsChanged:r.isRequired,shouldShowCheckIcon:o,componentId:a.isRequired,animationEnded:o},mixins:[f],componentDidUpdate({item:e}){var t;const{item:i}=this.props;var n,o;"video"===u(i)&&i._isSelected&&!e._isSelected&&null!==(t=i._video)&&void 0!==t&&t._shouldAutoPlay&&(null===(n=this._video)||void 0===n||null===(o=n.play)||void 0===o||o.call(n))},onItemClicked(e){e.preventDefault(),this.props.onItemClicked(this.props.item._id)},onKeyDown(e){_.isSpaceKey(e)&&this.onItemClicked(e)},getBodyClassName(){const{item:e}=this.props,t=u(e)?`ev-js-graphic-${e._itemGraphicLayout}`:null;return d("ev-accordion-item-body-inner ev-component-item-body-inner",t)},renderIcon(){const{item:e,shouldShowCheckIcon:t}=this.props,i=t&&e._isVisited?"check":e._isSelected?"minus":"plus";return c.createElement(y,{className:"ev-accordion-item-title-icon",icon:i})},renderBodyTextTop(){if(!["top","left"].includes(this.props.item._itemGraphicLayout))return this.renderBodyText()},renderBodyTextBottom(){if(!["bottom","right"].includes(this.props.item._itemGraphicLayout))return this.renderBodyText()},renderBodyText(){if(this.props.item.body)return c.createElement(g,{className:"ev-accordion-item-body-content",body:this.props.item.body})},renderMedia(){switch(u(this.props.item)){case"image":return this.renderGraphic();case"gif":return this.renderGif();case"video":return this.renderVideo();case"videoStream":return this.renderVideoStream();default:return null}},renderGraphic(){const{_graphic:e}=this.props.item;return c.createElement("div",{className:"ev-accordion-item-graphic"},c.createElement("div",{className:"ev-accordion-item-graphic-inner"},c.createElement(h,{graphicSrc:e.src,graphicSrcAdvanced:e.srcAdvanced,altText:e.alt,autoSize:!0,isLightboxEnabled:e._isLightboxEnabled,lightboxSrc:e.lightboxSrc,lightboxSrcAdvanced:e.lightboxSrcAdvanced,isMagnifierEnabled:e._isMagnifierEnabled})))},renderGif(){const{_gif:e}=this.props.item;return c.createElement("div",{className:"ev-accordion-item-graphic"},c.createElement("div",{className:"ev-accordion-item-graphic-inner"},c.createElement(h,{graphicSrc:e.src,altText:e.alt})))},renderVideo(){var e,t,i,n;const{item:o,onItemVideoMetricsChanged:r}=this.props;return c.createElement("div",{className:"ev-accordion-item-video"},c.createElement("div",{className:"ev-accordion-item-video-inner"},c.createElement(v,{ref:e=>this._video=e,src:l(o._video.mp4),posterSrc:p(o._video.poster),subtitlesSrc:l(null===(e=o._video._subtitles)||void 0===e?void 0:e.src),subtitlesLabel:null===(t=o._video._subtitles)||void 0===t?void 0:t.label,transcriptText:null===(i=o._video._transcript)||void 0===i?void 0:i.body,transcriptType:"popup",transcriptButtonText:null===(n=o._video._transcript)||void 0===n?void 0:n.button,controls:!0,hasBigPlayButton:!0,metrics:o._metrics,autoPlay:!1,onMetricsChange:e=>r(o._id,e),isVisible:o._isSelected,animationEnded:this.props.animationEnded})))},renderVideoStream(){var e,t;const{componentId:i,item:n}=this.props;return c.createElement("div",{className:"ev-accordion-item-video"},c.createElement("div",{className:"ev-accordion-item-video-inner"},c.createElement(C,{id:`${i}-${n._id}`,service:n._videoStream._service,options:n._videoStream._options,isVisible:n._isSelected,transcriptText:null===(e=n._videoStream._transcript)||void 0===e?void 0:e.body,transcriptType:"popup",transcriptButtonText:null===(t=n._videoStream._transcript)||void 0===t?void 0:t.button})))},render(){const{componentId:e,item:t}=this.props,i=t._isSelected||!1,n=e+t._id,o=`${n}label`,r=`${n}region`;return c.createElement("div",{className:d("ev-accordion-item-container",{"ev-selected":t._isSelected})},c.createElement("div",{key:o,className:"ev-accordion-item"},c.createElement("a",{href:"#",className:d("ev-accordion-item-title ev-component-item-title",{"ev-visited":t._isVisited,"ev-selected":t._isSelected}),tabIndex:"0",onClick:this.onItemClicked,onKeyDown:this.onKeyDown,id:o,"aria-expanded":i,"aria-controls":r,role:"button"},c.createElement("div",{className:"ev-accordion-item-title-inner ev-component-item-title-inner"},this.renderIcon(),c.createElement(b,{element:"span",className:"ev-accordion-item-title-text",html:t.title})))),c.createElement("div",{key:r,id:r,"aria-labelledby":o,role:"region",className:"ev-accordion-item-body ev-component-item-body"},c.createElement(m,{springConfig:{stiffness:200,damping:20},isOpened:i,style:{visibility:i?"visible":"hidden"}},c.createElement("div",{className:this.getBodyClassName()},this.renderBodyTextTop(),this.renderMedia(),this.renderBodyTextBottom()))))}});e.exports=I},63514:(e,t,i)=>{const n=i(16760),{ACCORDION_ITEM_CLICKED:o,ACCORDION_ITEM_VIDEO_METRICS:r}=i(48318);e.exports=function(e,t){switch(t.type){case o:{const i=n(e._items,(i=>{const n=i._id===t.payload.itemId;if(n&&!i._isSelected)return{...i,_isSelected:!0,_isVisited:!0};const{_shouldKeepItemsOpen:o}=e;return n||!o&&i._isSelected?{...i,_isSelected:!1}:i}));return{...e,_items:i}}case r:{const i=n(e._items,(e=>e._id===t.payload.itemId?{...e,_metrics:t.payload.metrics}:e));return{...e,_items:i}}default:return e}}},91362:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isVisited:{fieldKey:"_isVisited",type:"Boolean",shouldRestore:!0},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}}}},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:n}=e;return!0===n&&!0===i._isReady&&!0!==i[t]}},78435:(e,t,i)=>{const n=i(72579),o=i(96075);e.exports=e=>{var t,i,r,s,a;const c=n(e,"_mediaType","image");switch(c){case"gif":if(null===(t=e._gif)||void 0===t||!t.src)return;break;case"video":if(null===(i=e._video)||void 0===i||!i.mp4)return;break;case"videoStream":if(null===(r=e._videoStream)||void 0===r||!r._service||null===(s=e._videoStream)||void 0===s||null===(a=s._options)||void 0===a||!a._source)return;break;default:if(!o(e._graphic))return}return c}},96235:(e,t,i)=>{const n=i(72779);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,t,i,n,o){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},69293:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collapse=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=c(i(2784)),s=c(i(13980)),a=i(96001);function c(e){return e&&e.__esModule?e:{default:e}}var d="WAITING",l="RESIZING",p="RESTING",u="IDLING",m=function(){return null},h=t.Collapse=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return f.call(i),i.state={currentState:u,from:0,to:0},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isOpened,i=e.forceInitialAnimation,n=e.onRest;if(t){var o=this.getTo();if(i){var r=this.wrapper.clientHeight;this.setState({currentState:l,from:r,to:o})}else this.setState({currentState:u,from:o,to:o})}n()}},{key:"componentWillReceiveProps",value:function(e){e.hasNestedCollapse?e.isOpened!==this.props.isOpened&&this.setState({currentState:d}):this.state.currentState===u&&(e.isOpened||this.props.isOpened)&&this.setState({currentState:d})}},{key:"componentDidUpdate",value:function(e,t){var i=this.props,n=i.isOpened,o=i.onRest,r=i.onMeasure;if(this.state.currentState!==u){t.to!==this.state.to&&r({height:this.state.to,width:this.content.clientWidth});var s=this.wrapper.clientHeight,a=n?this.getTo():0;s===a?this.state.currentState!==p&&this.state.currentState!==d||this.setState({currentState:u,from:s,to:a}):this.setState({currentState:l,from:s,to:a})}else o()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){return r.default.createElement(a.Motion,n({},this.getMotionProps(),{onRest:this.onRest,children:this.renderContent}))}}]),t}(r.default.PureComponent);h.propTypes={isOpened:s.default.bool.isRequired,springConfig:s.default.objectOf(s.default.number),forceInitialAnimation:s.default.bool,hasNestedCollapse:s.default.bool,fixedHeight:s.default.number,theme:s.default.objectOf(s.default.string),style:s.default.object,onRender:s.default.func,onRest:s.default.func,onMeasure:s.default.func,children:s.default.node.isRequired},h.defaultProps={forceInitialAnimation:!1,hasNestedCollapse:!1,fixedHeight:-1,style:{},theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},onRender:m,onRest:m,onMeasure:m};var f=function(){var e=this;this.onContentRef=function(t){e.content=t},this.onWrapperRef=function(t){e.wrapper=t},this.onRest=function(){e.raf=requestAnimationFrame(e.setResting)},this.setResting=function(){e.setState({currentState:p})},this.getTo=function(){var t=e.props.fixedHeight;return t>-1?t:e.content.clientHeight},this.getWrapperStyle=function(t){if(e.state.currentState===u&&e.state.to){var i=e.props.fixedHeight;return i>-1?{overflow:"hidden",height:i}:{height:"auto"}}return e.state.currentState!==d||e.state.to?{overflow:"hidden",height:Math.max(0,t)}:{overflow:"hidden",height:0}},this.getMotionProps=function(){var t=e.props.springConfig;return e.state.currentState===u?{defaultStyle:{height:e.state.to},style:{height:e.state.to}}:{defaultStyle:{height:e.state.from},style:{height:(0,a.spring)(e.state.to,n({precision:1},t))}}},this.renderContent=function(t){var i=t.height,o=e.props,s=(o.isOpened,o.springConfig,o.forceInitialAnimation,o.hasNestedCollapse,o.fixedHeight,o.theme),a=o.style,c=o.onRender,d=(o.onRest,o.onMeasure,o.children),l=function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}(o,["isOpened","springConfig","forceInitialAnimation","hasNestedCollapse","fixedHeight","theme","style","onRender","onRest","onMeasure","children"]),p=e.state;return c({current:i,from:p.from,to:p.to}),r.default.createElement("div",n({ref:e.onWrapperRef,className:s.collapse,style:n({},e.getWrapperStyle(Math.max(0,i)),a)},l),r.default.createElement("div",{ref:e.onContentRef,className:s.content},d))}}},352:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnmountClosed=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=c(i(2784)),s=c(i(13980)),a=i(69293);function c(e){return e&&e.__esModule?e:{default:e}}(t.UnmountClosed=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.componentWillReceiveProps=function(e){var t=e.isOpened;!i.props.isOpened&&t&&i.setState({forceInitialAnimation:!0,shouldUnmount:!1})},i.onRest=function(){var e=i.props,t=e.isOpened,n=e.onRest;t||i.setState({shouldUnmount:!0}),n&&n.apply(void 0,arguments)},i.state={shouldUnmount:!i.props.isOpened,forceInitialAnimation:!i.props.isOpened},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.isOpened,i=(e.onRest,function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}(e,["isOpened","onRest"])),o=this.state,s=o.forceInitialAnimation;return o.shouldUnmount?null:r.default.createElement(a.Collapse,n({forceInitialAnimation:s,isOpened:t,onRest:this.onRest},i))}}]),t}(r.default.PureComponent)).propTypes={isOpened:s.default.bool.isRequired,onRest:s.default.func}},98452:(e,t,i)=>{var n=i(69293).Collapse,o=i(352).UnmountClosed;o.Collapse=n,o.UnmountClosed=o,e.exports=o}}]);