"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7684],{36227:(e,t)=>{t.SURVEY_RATING_SELECTED="SURVEY_RATING_SELECTED",t.SURVEY_OPTION_SELECTED="SURVEY_OPTION_SELECTED",t.SURVEY_FIELD_UPDATE="SURVEY_FIELD_UPDATE",t.onSurveyRatingSelected=e=>({type:t.SURVEY_RATING_SELECTED,payload:e}),t.onSurveyOptionSelected=e=>({type:t.SURVEY_OPTION_SELECTED,payload:e}),t.onSurveyFieldUpdate=e=>({type:t.SURVEY_FIELD_UPDATE,payload:e})},94867:(e,t,s)=>{const o=s(58335),{func:i,object:n}=s(13980),r=s(2784),l=s(72779),a=s(23346),{Component:d}=s(58720),p=s(84221),c=s(27843),u=s(96235),m=s(88934),y=s(43855),_=s(88951),v=s(96622),h=s(30275),S=s(7310),b=o({displayName:"Survey",propTypes:{component:n.isRequired,setComponentAsReady:i.isRequired,setComponentAsViewed:i.isRequired,setComponentAsStarted:i.isRequired,setComponentAsComplete:i.isRequired,onSurveyRatingSelected:i.isRequired,onSurveyOptionSelected:i.isRequired,onSurveyFieldUpdate:i.isRequired,buttons:n.isRequired,theme:n.isRequired,styles:n,showPrompt:i.isRequired},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},onVisibilityChange(...e){y(...e,this,this.props.setComponentAsViewed)},showDialog(e){(e.title||e.body)&&this.props.showPrompt({title:e.title,body:e.body,_dismiss:{text:e.closeButtonText}})},onSurveyStarted(){const{component:e,setComponentAsStarted:t}=this.props;e._hasStarted||t(e._id)},onSurveyRatingSelected(e){const{component:t,onSurveyRatingSelected:s}=this.props;s({componentId:t._id,rating:e}),this.onSurveyStarted()},onSurveyOptionSelected(e,t){const{component:s,onSurveyOptionSelected:o}=this.props;o({componentId:s._id,optionId:e,isSelected:t}),this.onSurveyStarted()},onSurveyFieldUpdate(e,t){const{component:s,onSurveyFieldUpdate:o}=this.props;o({componentId:s._id,fieldId:e,value:t}),this.onSurveyStarted()},onSubmitClicked(){const{component:e,setComponentAsComplete:t}=this.props,{_isRatingsEnabled:s,_rating:o,_dialogs:i}=e;if(s&&0===o)return this.showDialog(i._noRatingDialog);t(e._id),this.showDialog(i._successDialog)},renderSurveyRatings(){const{component:e}=this.props;if(e._isRatingsEnabled)return r.createElement(v,{label:e.ratingsLabel,rating:e._rating,ratings:e._ratings,starColor:e._starColor,starSelectedColor:e._starSelectedColor,onSurveyRatingSelected:this.onSurveyRatingSelected,swatches:this.props.theme._swatches,isDisabled:e._isComplete})},renderSurveyOptions(){const{component:e}=this.props;if(e._options.length)return r.createElement(h,{componentId:e._id,label:e.optionsLabel,options:e._options,onSurveyOptionSelected:this.onSurveyOptionSelected,isDisabled:e._isComplete,showIcons:e.showOptionIcons})},renderSurveyFields(){const{component:e}=this.props;if(e._fields.length)return r.createElement(S,{componentId:e._id,fields:e._fields,onSurveyFieldUpdate:this.onSurveyFieldUpdate,isDisabled:e._isComplete})},renderSurveyComplete(){const{component:e}=this.props;if(!e._isComplete)return;const{text:t,_icon:s}=e._completeState;return t||s?r.createElement(_,{text:t,icon:s}):void 0},renderButtons(){const{buttons:e,component:t}=this.props,s=c(this.props);return r.createElement("div",{className:p(s)},r.createElement("div",{className:"ev-buttons-cluster-bottom ev-clearfix"},r.createElement(a,{className:l("ev-buttons-action ev-survey-submit",{"ev-disabled":t._isComplete}),text:t.surveySubmitButtonText,onClick:this.onSubmitClicked,"aria-label":e._submit.ariaLabel,isDisabled:t._isComplete})))},render(){const{props:e}=this;return r.createElement(d,{component:e.component,styles:e.styles,isVisibilitySensorActive:m(e),onVisibilityChange:this.onVisibilityChange},r.createElement("div",{className:u(e.component)},r.createElement("div",{className:"ev-survey-form"},this.renderSurveyRatings(),this.renderSurveyOptions(),this.renderSurveyFields()),this.renderButtons(),this.renderSurveyComplete()))}});e.exports=b},88951:(e,t,s)=>{const o=s(2784),{string:i}=s(13980),n=s(50085),r=s(72779),l=({icon:e,text:t})=>o.createElement("div",{className:"ev-label ev-survey-complete",role:"status"},e&&o.createElement(n,{className:r({"ev-has-label":t}),icon:e,style:{color:"inherit"}}),t);l.propTypes={icon:i,text:i},e.exports=l},7310:(e,t,s)=>{const o=s(16760),i=s(2784),{array:n,bool:r,func:l,string:a}=s(13980),d=s(41119),p=({fields:e,componentId:t,onSurveyFieldUpdate:s,isDisabled:n})=>i.createElement("div",{className:"ev-survey-fields"},o(e,(({_id:e,_userAnswer:o="",labelText:r,placeholderText:l})=>i.createElement("div",{className:"ev-survey-field",key:e},i.createElement(d,{id:`${t}-${e}`,value:o,label:r,onChange:t=>s(e,t),placeholder:l,isDisabled:n})))));p.propTypes={componentId:a.isRequired,fields:n.isRequired,onSurveyFieldUpdate:l.isRequired,isDisabled:r.isRequired},p.defaultProps={fields:[],isDisabled:!1},e.exports=p},30275:(e,t,s)=>{const o=s(16760),i=s(2784),n=s(72779),{array:r,bool:l,func:a,string:d}=s(13980),p=s(28739),c=s(50085),u=({componentId:e,label:t,options:s,onSurveyOptionSelected:r,showIcons:l,isDisabled:a})=>i.createElement("fieldset",{className:"ev-survey-options"},t?i.createElement("legend",{className:"ev-label"},t):null,o(s,(({_id:t,text:s,_isSelected:o=!1})=>i.createElement("div",{className:"ev-survey-option",key:t},i.createElement("input",{id:`${e}-${t}`,"aria-labelledby":`${e}-${t}-label`,value:t,type:"checkbox",checked:o,disabled:a,onChange:()=>r(t,!o),onKeyDown:e=>{p.isEnterKey(e)&&r(t,!o)}}),i.createElement("label",{id:`${e}-${t}-label`,"aria-hidden":!0,className:n("ev-survey-option-label",{"ev-selected":o,"ev-disabled":a}),htmlFor:`${e}-${t}`},l&&i.createElement(c,{icon:o?"check-square":"square"}),s)))));u.propTypes={componentId:d.isRequired,label:d,options:r,isDisabled:l,showIcons:l,onSurveyOptionSelected:a.isRequired},u.defaultProps={options:[],isDisabled:!1},e.exports=u},96622:(e,t,s)=>{const o=s(16760),i=s(58335),n=s(2784),{bool:r,func:l,number:a,object:d,string:p}=s(13980),c=s(60309),u=s(50085),m=["one","two","three","four","five"],y=i({displayName:"SurveyRating",propTypes:{label:p,rating:a.isRequired,ratings:d.isRequired,onSurveyRatingSelected:l.isRequired,starColor:p.isRequired,starSelectedColor:p.isRequired,swatches:d.isRequired,isDisabled:r},getDefaultProps:()=>({rating:0,isDisabled:!1}),getInitialState:()=>({_isHoverMode:!1,_hoverRating:1}),onItemHover(e,t=1){this.setState({_isHoverMode:e,_hoverRating:t})},renderItems(){const{rating:e,ratings:t,onSurveyRatingSelected:s,starColor:i,starSelectedColor:r,swatches:l,isDisabled:a}=this.props,{_isHoverMode:d,_hoverRating:p}=this.state,y=c(i,l),_=c(r,l);return o(m,((o,i)=>{const r=i+1,l=d?r<=p:r<=e;return n.createElement("button",{key:i,className:"ev-survey-rating-star",onClick:e=>{e.preventDefault(),s(r)},onMouseEnter:()=>this.onItemHover(!0,r),onMouseLeave:()=>this.onItemHover(!1),"aria-label":t[o],"aria-pressed":l,"aria-disabled":a,tabIndex:a?-1:0,style:{pointerEvents:a?"none":"all"}},n.createElement(u,{icon:l?"star":"star-empty",style:{color:l?_:y}}))}))},renderLabel(){const{rating:e,ratings:t}=this.props,{_isHoverMode:s,_hoverRating:o}=this.state,i=t[m[(s?o:e)-1]];if(i)return n.createElement("span",{className:"ev-label"},i)},render(){return n.createElement("div",{className:"ev-survey-ratings"},n.createElement("fieldset",null,this.props.label?n.createElement("legend",{className:"ev-label"},this.props.label):null,this.renderItems(),this.renderLabel()))}});e.exports=y},65432:(e,t,s)=>{const o=s(63867);e.exports=(e,t)=>({buttons:e.course._buttons,articleStyle:o(e,t,"article")._classes})},88523:(e,t,s)=>{const o=s(16760),{SETUP_COMPONENT:i}=s(29933),{SURVEY_RATING_SELECTED:n,SURVEY_OPTION_SELECTED:r,SURVEY_FIELD_UPDATE:l}=s(36227);e.exports=(e,t)=>{switch(t.type){case i:return e._isComplete?e:{...e,_rating:0,_options:o(e._options,(e=>({...e,_isSelected:!1}))),_fields:o(e._fields,(e=>({...e,_userAnswer:""})))};case n:return{...e,_rating:t.payload.rating};case r:return{...e,_options:o(e._options,(e=>e._id===t.payload.optionId?{...e,_isSelected:t.payload.isSelected}:e))};case l:return{...e,_fields:o(e._fields,(e=>e._id===t.payload.fieldId?{...e,_userAnswer:t.payload.value}:e))};default:return e}}},38340:(e,t,s)=>{const{registerComponent:o}=s(90876),i=s(94867),n=s(65432),r=s(43724),l=s(88523),{onSurveyRatingSelected:a,onSurveyOptionSelected:d,onSurveyFieldUpdate:p}=s(36227);o("survey",{component:i,actions:{onSurveyRatingSelected:a,onSurveyOptionSelected:d,onSurveyFieldUpdate:p},reducer:l,mapStateToProps:n,trackingMap:r})},43724:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_rating:{fieldKey:"_rating",type:"Number",shouldRestore:!0},_options:{fieldKey:"_options",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_isSelected:{fieldKey:"_isSelected",type:"Boolean",shouldRestore:!0},text:{fieldKey:"text",type:"String",shouldRestore:!1},name:{fieldKey:"name",type:"String",shouldRestore:!1}}},_fields:{fieldKey:"_fields",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},name:{fieldKey:"name",type:"String",shouldRestore:!1}}},_items:{fieldKey:"_items",type:"Function",shouldRestore:!1,mapCallback:function(e,t){const s=[],{_fields:o,_options:i}=t;return Array.isArray(o)&&o.forEach((e=>{s.push({_id:e.name||"field",text:e.labelText,value:e._userAnswer||""})})),Array.isArray(i)&&i.forEach((e=>{s.push({_id:e.name||"option",text:e.text,_isSelected:!!e._isSelected})})),s}},_score:{fieldKey:"_score",type:"Function",shouldRestore:!1,mapCallback:function(e,t){return t._rating}}}},41119:(e,t,s)=>{const o=s(58335),i=s(13980),n=s(2784),r=s(72779),l=o({displayName:"TextArea",propTypes:{id:i.string,value:i.string.isRequired,label:i.string,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return n.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:t=>e.onChange(t.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:r("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?n.createElement(n.Fragment,null,n.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=l},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:s,isPageReady:o}=e;return!0===o&&!0===s._isReady&&!0!==s[t]}},96235:(e,t,s)=>{const o=s(72779);e.exports=e=>o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,t,s,o,i){o&&o.props&&o.props.component?(t.top&&(o.isInviewTop=!0),t.bottom&&(o.isInviewBottom=!0),o.isInviewTop&&o.isInviewBottom&&i&&i(o.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);