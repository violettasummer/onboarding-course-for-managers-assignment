"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1013],{78230:(e,t)=>{t.CERTIFICATE_COMPLETED="CERTIFICATE_COMPLETED",t.certificateCompleted=e=>({type:t.CERTIFICATE_COMPLETED,payload:e})},15764:(e,t,n)=>{const{registerEpics:i,registerReducer:r}=n(90876),{registerElementsEpic:c,checkOnCourseAttainmentMethod:o,checkOnCourseAssessmentMethod:a,checkOnAppReadyOrComponentsUpdatedEpic:s}=n(37389);r("certificate",n(96912)),i(c,o,a,s)},19760:(e,t,n)=>{var i=n(14859)(n(52954));const r=n(58335),c=n(13980),o=n(2784),a=n(72579),s=n(43830),l=r({displayName:"CertificateDownload",propTypes:{certificate:c.object.isRequired,username:c.string,isComplete:c.bool.isRequired,downloads:c.object.isRequired,device:c.object},onDownloadCertificateClicked(e){var t=this;return(0,i.default)((function*(){e.preventDefault(),e.currentTarget.blur();const{certificate:n,username:i}=t.props,r=yield s(n,i);if(t.props.device.touch&&!t.props.device.isWindowsTouchScreen)return r.open();const c=a(n,"fileName","Certificate");r.download(`${c}.pdf`)}))()},renderDownloadButton(){const{props:e}=this,t=!(e.username&&e.isComplete);return o.createElement("button",{className:"ev-button ev-certificate-download",onClick:this.onDownloadCertificateClicked,disabled:t},e.certificate.downloadButtonText)},renderCertificateItemText(){const{isComplete:e,certificate:t}=this.props,n=e?t.achievedText:t.notAchievedText;return o.createElement("div",null,n)},renderNameRequired(){const{props:e}=this;if(e.isComplete&&!e.username)return o.createElement("span",{className:"ev-certificate-action-warning ev-label"},o.createElement("strong",null,e.downloads.nameRequiredText))},render(){return o.createElement("div",{className:"ev-list-item ev-certificate-download"},o.createElement("div",{className:"ev-list-item-inner ev-clearfix"},o.createElement("div",{className:"ev-list-item-left"},o.createElement("div",{className:"ev-list-item-title"},this.props.certificate.title),o.createElement("div",{className:"ev-list-item-content"},this.renderCertificateItemText())),o.createElement("div",{className:"ev-list-item-right"},this.renderNameRequired(),this.renderDownloadButton())))}});e.exports=l},93662:(e,t,n)=>{const i=n(2784),{connect:r}=n(57903),c=n(19760);e.exports=r((({certificate:e,course:t,device:n})=>({device:n,isComplete:e.isComplete,certificate:t._certificate})))((e=>i.createElement(c,e)))},37389:(e,t,n)=>{const i=n(2784),{Redirect:r}=n(77682),{Observable:c}=n(28761),{asap:o}=n(1127),a=n(67718),{APP_READY:s,APP_STARTED:l}=n(63444),{addElement:u}=n(51777),{loadPdfMake:d}=n(13066),{COMPONENTS_UPDATED:p}=n(29933),{addPrompt:f}=n(90672),{COURSE_ATTAINMENT_COMPLETE:m}=n(66455),{COURSE_ASSESSMENT_COMPLETE:E}=n(36580),_=n(93662),{certificateCompleted:h}=n(78230),g=n(4488),C=n(4219),S=n(61772);function T({course:e}){const t=[h(!0)];if(!e._certificate._hideDialog){const n={title:e._certificate.title,body:e._certificate.achievedText,_action:{text:e._downloads.viewDownloadsButtonText,_link:{_linkType:"extensions",_link:"downloads"}},_glyph:{_type:"icon",_icon:"license"}};t.push(f(n))}return c.of(...t,o)}t.registerElementsEpic=(e,t)=>e.filter(a(s,"_certificate",t)).mergeMap((()=>c.of(d(),u({props:{},component:_,parent:"downloads",name:"certificate"}),u({parent:"router",name:"certificateRedirect",path:"/certificate",exact:!0,render:()=>i.createElement(r,{to:"/downloads"})})))),t.checkOnAppReadyOrComponentsUpdatedEpic=(e,t)=>e.filter(a([l,p],"_certificate",t)).mergeMap((()=>{const e=t.getState(),n=S(e);return e.certificate.isComplete!==n?c.of(h(n)):c.empty()})),t.checkOnCourseAttainmentMethod=(e,t)=>e.filter(a(m,"_certificate",t)).filter((()=>{const e=t.getState();return!e.certificate.isComplete&&C(e)})).mergeMap((()=>T(t.getState()))),t.checkOnCourseAssessmentMethod=(e,t)=>e.filter(a(E,"_certificate",t)).filter((()=>{const e=t.getState();return!e.certificate.isComplete&&g(e)})).mergeMap((()=>T(t.getState())))},43830:(e,t,n)=>{var i=n(14859)(n(52954));const r=n(72579),c=n(9869),o=n(17386);function a(e){return"landscape"===e._orientation}e.exports=function(){var e=(0,i.default)((function*(e,t){const n=yield c(e),i={pageOrientation:e._orientation,content:[]},s=function(e,t){if(!t._primaryLogo&&!t._secondaryLogo)return null;const n={columns:[]},i=a(e)?[80,80]:[100,100];if(t._primaryLogo){const e={width:"50%",alignment:"left",stack:[{image:t._primaryLogo,fit:i}]};n.columns.push(e)}if(t._secondaryLogo){const e={width:"50%",alignment:"right",stack:[{image:t._secondaryLogo,fit:i}]};n.columns.push(e)}return n}(e,n);null!==s&&i.content.push(s);const l=function(e){if(!e.certificateTitle)return null;let t=[0,20,0,20],n=32;return a(e)&&(t=[0,10,0,15],n=26),{text:e.certificateTitle,alignment:"center",fontSize:n,margin:t}}(e);null!==l&&i.content.push(l);const u=function(e){if(!e.certificateMessage)return null;let t=[0,0,0,20],n=16;return a(e)&&(t=[0,0,0,15],n=12),{text:e.certificateMessage,alignment:"center",fontSize:n,margin:t}}(e);null!==u&&i.content.push(u);const d=function(e){if(!e.certificateGoal)return null;let t=[0,0,0,20],n=16;return a(e)&&(t=[0,0,0,15],n=12),{text:e.certificateGoal,alignment:"center",fontSize:n,margin:t}}(e);null!==d&&i.content.push(d);const p=function(e,t){if(!t._graphic)return null;let n=[0,0,0,20],i=[350,350];return a(e)&&(n=[0,0,0,15],i=[250,250]),{image:t._graphic,alignment:"center",fit:i,margin:n}}(e,n);null!==p&&i.content.push(p);const f=function(e,t){let n=[0,0,0,20],i=32;return a(e)&&(n=[0,0,0,15],i=24),{text:`${e.nameLabel} ${t}`,alignment:"center",italics:!0,fontSize:i,margin:n}}(e,t);i.content.push(f);const m=function(e){const t=r(e,"_dateFormat","DD/MM/YYYY"),n=o(t);let i=[0,0,0,20],c=16;return a(e)&&(i=[0,0,0,10],c=12),{text:`${e.dateLabel} ${n}`,alignment:"center",fontSize:c,margin:i}}(e);return i.content.push(m),window.pdfMake.createPdf(i)}));return function(t,n){return e.apply(this,arguments)}}()},61772:(e,t,n)=>{const i=n(4219),r=n(4488),{COURSE_ATTAINMENT:c,COURSE_ASSESSMENT:o,COURSE_ASSESSMENT_PASSED:a}=n(22443);e.exports=e=>{const t=e.course._certificate._obtainmentMethod;return t===c?i(e):(t===o||t===a)&&r(e)}},4488:(e,t,n)=>{const{COURSE_ASSESSMENT:i,COURSE_ASSESSMENT_PASSED:r}=n(22443);e.exports=({course:e,courseAssessment:t})=>{var n,c;if(null==e||null===(n=e._certificate)||void 0===n||!n._isEnabled||null==e||null===(c=e._courseAssessment)||void 0===c||!c._isEnabled)return!1;const{_obtainmentMethod:o}=e._certificate;return!(![i,r].includes(o)||!t._isComplete||o===r&&!t._isPassed)}},4219:(e,t,n)=>{const{COURSE_ATTAINMENT:i}=n(22443);e.exports=({course:e,courseAttainment:t})=>{var n,r;return!!(null!=e&&null!==(n=e._certificate)&&void 0!==n&&n._isEnabled&&null!=e&&null!==(r=e._courseAttainment)&&void 0!==r&&r._isEnabled&&e._certificate._obtainmentMethod===i&&t._isComplete)}},22443:e=>{e.exports={COURSE_ASSESSMENT:"Course Assessment",COURSE_ASSESSMENT_PASSED:"Course Assessment Passed",COURSE_ATTAINMENT:"Course Attainment"}},96912:(e,t,n)=>{const{SETUP_APP:i}=n(63444),{CERTIFICATE_COMPLETED:r}=n(78230),c={isComplete:!1};e.exports=(e=c,t)=>{var n;return t.type===i?null!==(n=t.payload.course._certificate)&&void 0!==n&&n._isEnabled?e:c:t.type===r?{...e,isComplete:t.payload}:e}},18078:(e,t,n)=>{var i=n(14859)(n(52954));e.exports=function(){var e=(0,i.default)((function*(e){const t=new Image;t.src=e,yield t.decode();const n=document.createElement("canvas"),i=n.getContext("2d"),r=t.width<500?t.width:500,c=t.width<500?t.height:r*t.height/t.width;return n.width=r,n.height=c,i.drawImage(t,0,0,r,c),n.toDataURL("image/png")}));return function(t){return e.apply(this,arguments)}}()},9869:(e,t,n)=>{var i=n(14859)(n(52954));const r=n(58215),c=n(36402),o=n(70913),a=n(18078);e.exports=function(){var e=(0,i.default)((function*(e,t=["_graphic","_primaryLogo","_secondaryLogo"],n=o){const i=r(t,((t,i)=>(e[i]&&(t[i]=n(e[i])),t)),{});if(!c(i))return i;for(const[e,t]of Object.entries(i)){const n=yield a(t);i[e]=n}return i}));return function(t){return e.apply(this,arguments)}}()},67718:(e,t,n)=>{const i=n(72579);e.exports=(e,t,n)=>(Array.isArray(e)||(e=[e]),({type:r})=>-1!==e.indexOf(r)&&i(n.getState(),["course",t,"_isEnabled"],!1))},17386:(e,t,n)=>{var i=n(14859)(n(21498));e.exports=function(e,t=new Date){return"string"==typeof t&&(t=new Date(t)),(0,i.default)(t,function(e){return e.includes("DD")&&(e=e.replace("DD","dd")),e.includes("YYYY")&&(e=e.replace("YYYY","yyyy")),e}(e))}}}]);