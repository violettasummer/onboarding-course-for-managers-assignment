"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8211],{86188:(e,t)=>{t.SET_AUDIO_ITEM_AS_COMPLETE="SET_AUDIO_ITEM_AS_COMPLETE",t.setAudioItemAsComplete=(e,i)=>({type:t.SET_AUDIO_ITEM_AS_COMPLETE,payload:{componentId:e,itemId:i}})},67501:(e,t,i)=>{const{registerComponent:s}=i(90876),n=i(2768),o=i(42099),{setAudioItemAsComplete:r}=i(86188);s("audio",{component:n,actions:{setAudioItemAsComplete:r},reducer:o,trackingMap:i(91776)})},2768:(e,t,i)=>{const s=i(90882),n=i(16760),o=i(58335),{func:r,object:a}=i(13980),l=i(2784),p=i(72779),{Component:d}=i(58720),m=i(43726),u=i(88934),c=i(43855),h=i(96235),_=i(19629),y=o({displayName:"Audio",propTypes:{course:a.isRequired,component:a.isRequired,setAudioItemAsComplete:r.isRequired,setComponentAsReady:r.isRequired,setComponentAsViewed:r.isRequired,setComponentAsStarted:r.isRequired,setComponentAsComplete:r.isRequired,styles:a},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps(e){s(e.component._items,"_isComplete").length!==e.component._items.length||e.component._isComplete||this.props.setComponentAsComplete(this.props.component._id)},setAudioItemAsComplete(e){this.props.setAudioItemAsComplete(this.props.component._id,e)},setComponentAsStarted(){this.props.component._hasStarted||this.props.setComponentAsStarted(this.props.component._id)},onVisibilityChange(...e){c(...e,this,this.props.setComponentAsViewed)},getClassName(){const{component:e}=this.props;return p(h(e),{"ev-has-grid-layout":e._enableColumnLayout})},renderItems(){return n(this.props.component._items,(e=>{var t;return l.createElement(_,{key:e._id,item:e,transcriptTitle:null===(t=this.props.course._videos)||void 0===t?void 0:t.transcriptTitle,enableColumnLayout:this.props.component._enableColumnLayout,shouldDisplayControls:this.props.component._shouldDisplayControls,setComponentAsStarted:this.setComponentAsStarted,setAudioItemAsComplete:this.setAudioItemAsComplete})}))},renderItemsContainer(){const{component:e}=this.props;return e._enableColumnLayout?l.createElement(m,{isList:!0,columns:e._numberOfColumns,animations:e._animations},this.renderItems()):l.createElement("ul",{className:"ev-audio-items"},this.renderItems())},render(){const{props:e}=this;return l.createElement(d,{component:e.component,styles:e.styles,isVisibilitySensorActive:u(e),onVisibilityChange:this.onVisibilityChange},l.createElement("div",{className:this.getClassName()},this.renderItemsContainer()))}});e.exports=y},19629:(e,t,i)=>{const s=i(72579),n=i(58335),{bool:o,func:r,object:a,shape:l,string:p}=i(13980),d=i(2784),{connect:m}=i(57903),u=i(72779),c=i(70913),h=i(88078),_=i(76967),y=i(68387),{addPrompt:C}=i(90672),g=n({displayName:"AudioItem",propTypes:{item:l({_audio:a,_transcript:a,_setCompletionOn:p}).isRequired,enableColumnLayout:o,shouldDisplayControls:o,setAudioItemAsComplete:r.isRequired,setComponentAsStarted:r.isRequired,transcriptTitle:p,addPrompt:r.isRequired},getInitialState:()=>({isTranscriptOpen:!1}),componentDidUpdate({item:e}){var t,i;if(!this._audio)return;const{item:s}=this.props;var n,o,r,a,l,p;s._audio._isExternalLink===e._audio._isExternalLink?s._audio._isExternalLink?s._audio.externalUrl!==e._audio.externalUrl&&(null===(r=(a=this._audio).load)||void 0===r||r.call(a)):c(null===(t=s._audio)||void 0===t?void 0:t.mp3)!==c(null===(i=e._audio)||void 0===i?void 0:i.mp3)&&(null===(l=(p=this._audio).load)||void 0===l||l.call(p)):null===(n=(o=this._audio).load)||void 0===n||n.call(o)},setAudioItemAsComplete(){this.props.setAudioItemAsComplete(this.props.item._id)},onAudioButtonClicked(e){var t,i,s;if(e.preventDefault(),this._audio.paused)return this._audio.currentTime=0,void(null===(s=this._audio)||void 0===s||s.play());null===(t=(i=this._audio).pause)||void 0===t||t.call(i)},onPlay(){const{props:e}=this;"play"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete(),e.setComponentAsStarted()},onTranscriptButtonClicked(){const{_setCompletionOn:e,_isComplete:t,_transcript:i}=this.props.item;if("play"!==e&&"ended"!==e||t||this.setAudioItemAsComplete(),this.props.setComponentAsStarted(),s(i,"_shouldOpenTranscriptInPopup",!0))return this.props.addPrompt({title:this.props.transcriptTitle,body:i.body,_glyph:{_type:"icon",_icon:"audio-book"}});this.setState((({isTranscriptOpen:e})=>({isTranscriptOpen:!e})))},onAudioEnded(){const{props:e}=this;"ended"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete()},onVisibilityChanged(e,{top:t,bottom:i}){t&&(this.isInviewTop=!0),i&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&this.setAudioItemAsComplete()},getIsVisibilitySensorActive(){const{item:e}=this.props;return"inview"===s(e,"_setCompletionOn","inview")&&!e._isComplete},renderAudioSource(){const{item:e}=this.props;let t=e._audio.mp3;return t&&(t=c(t)),e._audio._isExternalLink&&(t=e._audio.externalUrl),d.createElement("source",{src:t,type:"audio/mp3"})},renderAudioElement(){const{item:e,shouldDisplayControls:t}=this.props,i=!e._audio.poster||t;return d.createElement("audio",{ref:e=>this._audio=e,preload:"auto",onPlay:this.onPlay,onEnded:this.onAudioEnded,controls:i,controlsList:"nodownload"},this.renderAudioSource())},renderAudioButton(){const{_audio:e}=this.props.item;if(e.poster)return d.createElement("button",{className:"ev-audio-player-button",onClick:this.onAudioButtonClicked},d.createElement(h,{graphicSrc:e.poster,altText:e.alt}))},renderTranscriptButton(){const{_transcript:e}=this.props.item;if(null==e||!e.button||null==e||!e.body)return;const t=s(e,"_shouldOpenTranscriptInPopup",!0)?"popup":"collapse";return d.createElement(_.Button,{text:e.button,transcriptType:t,isTranscriptOpen:this.state.isTranscriptOpen,onClick:this.onTranscriptButtonClicked})},renderTranscriptBody(){const{_transcript:e}=this.props.item;if(null!=e&&e.body&&!s(e,"_shouldOpenTranscriptInPopup",!0))return d.createElement(_.Body,{text:e.body,className:u("ev-component-body",{"ev-display-none":!this.state.isTranscriptOpen}),innerClassName:"ev-component-body-inner"})},render(){const{props:e}=this,t=e.enableColumnLayout?"div":"li";return d.createElement(y,{active:this.getIsVisibilitySensorActive(),delay:600,partialVisibility:!0,onChange:this.onVisibilityChanged},d.createElement(t,{className:"ev-audio-item"},this.renderAudioButton(),this.renderAudioElement(),this.renderTranscriptButton(),this.renderTranscriptBody()))}});e.exports=m(null,{addPrompt:C})(g)},42099:(e,t,i)=>{const s=i(16760),{SET_AUDIO_ITEM_AS_COMPLETE:n}=i(86188);e.exports=(e,t)=>{if(t.type===n){const i=s(e._items,(e=>e._id===t.payload.itemId?{...e,_isComplete:!0}:e));return{...e,_items:i}}return e}},91776:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0}}}}},43726:(e,t,i)=>{const s=i(92191),n=i(60019),o=i(58335),r=i(2784),a=i(72779),{bool:l,func:p,object:d,number:m,string:u}=i(13980),{connect:c}=i(57903),{Trail:h,config:_,animated:y,interpolate:C}=i(64325),g=i(68387),I=i(13422),A=o({displayName:"Grid",propTypes:{isList:l.isRequired,isRTL:l.isRequired,shouldIgnoreScreenSize:l.isRequired,animations:d,gridItemStyle:d,gridItemInnerStyle:d,windowWidth:m.isRequired,getGridItemInnerStyle:p,hasGridItemInnerPadding:l,className:u,columns:m,separatorBorder:u},getDefaultProps:()=>({isList:!1,isRTL:!1,shouldIgnoreScreenSize:!1,gridItemStyle:{},gridItemInnerStyle:{},hasGridItemInnerPadding:!0,animations:{_slideInX:{_isEnabled:!1},_slideInY:{_isEnabled:!1},_fadeInItem:{_isEnabled:!1},_scaleInItem:{_isEnabled:!1},_easing:"default"}}),getInitialState(){return{columns:this.getColumns(window.innerWidth,this.props.columns),isVisible:!1,_animationEnded:!1}},componentDidMount(){this._isMounted=!0},componentWillUnmount(){this._isMounted=!1},UNSAFE_componentWillReceiveProps(e){const{props:t}=this,i=e.windowWidth!==t.windowWidth,s=t.columns!==e.columns;(i||s)&&this.updateColumns(e.windowWidth,e.columns)},getGridClassName(){return a("ev-grid",this.props.className)},getColumns(e,t){return this.props.shouldIgnoreScreenSize?t:e>=768?t||2:e<768&&e>=520?2:1},updateColumns(e,t){this._isMounted&&this.setState({columns:this.getColumns(e,t)})},getAnimationsEnabled(){const{animations:e}=this.props;let t=!1;return e&&(t=0!==s(e).values().filter({_isEnabled:!0}).value().length),t},getGridItemStyle(e,t,i,s,o,r){const{isRTL:a}=this.props,{_animationEnded:l}=this.state,p=100/this.state.columns,d=n({flex:`${p}%`,textAlign:"center",boxSizing:"border-box",margin:"10px 0"},this.props.gridItemStyle);t&&(d.opacity=i,d.transform=C([s,o,r],((e,t,i)=>`translate(${e}%,${t}%) scale(${i})`)),l&&(d.transform="none"));const m=this.props.children.length%this.state.columns;if((e+1)%this.state.columns!=0&&this.props.separatorBorder&&(d.borderRight=this.props.separatorBorder),0!==m)if(1===m)e===this.props.children.length-1&&(d.margin="auto");else if(e===this.props.children.length-m){let e=p/2;2===m&&4===this.state.columns&&(e=p),a?d.marginRight=`${e}%`:d.marginLeft=`${e}%`}return d},getGridItemInnerStyle(e){const{gridItemInnerStyle:t,getGridItemInnerStyle:i,hasGridItemInnerPadding:s}=this.props,o=i?i(e):{};return n({padding:s?"0 10px":0,boxSizing:"border-box"},t,o)},getVisibilitySensorActive(){return!1===this.state.isVisible},onVisibilityChange(e){e&&this.setState({isVisible:!0})},getSpringTo(){const{isVisible:e}=this.state;return e?{opacity:1,x:0,y:0,scale:1}:I(this.props.animations)},onStart(){this.setState({_animationEnded:!1})},onRest(){this.setState({_animationEnded:!0})},renderGridItems(e){const{isList:t,children:i,animations:s}=this.props,n=t?y.li:y.div;return e?r.createElement(h,{native:!0,key:i.length,from:I(s),to:this.getSpringTo(),onStart:this.onStart,onRest:this.onRest,config:_[s._easing]||_.default,keys:i.map(((e,t)=>t)),items:i},((e,t)=>({opacity:i,x:s,y:o,scale:a})=>r.createElement(n,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!0,i,s,o,a)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e)))):i.map(((e,t)=>r.createElement(n,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!1)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))))},render(){const{isList:e}=this.props,t=e?"ul":"div";return this.getAnimationsEnabled()?r.createElement(g,{active:this.getVisibilitySensorActive(),partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:200,onChange:this.onVisibilityChange},r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!0))):r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!1))}});e.exports=c((({device:e,course:t})=>({windowWidth:e.windowWidth,isRTL:t._isRTL})))(A)},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:s}=e;return!0===s&&!0===i._isReady&&!0!==i[t]}},96235:(e,t,i)=>{const s=i(72779);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,t,i,s,n){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&n&&n(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);