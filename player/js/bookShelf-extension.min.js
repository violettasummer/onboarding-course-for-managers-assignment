"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6526],{52539:(e,t,o)=>{const{registerReducer:r,registerEpics:a}=o(90876),i=o(6443),n=o(20319),{bookShelfSetupEpic:l,registerTrackingMapEpic:s,saveTrackingEpic:c}=o(44405);r("bookShelf",n),a(l,s,c,i("bookShelf"))},24109:(e,t,o)=>{const r=o(90882),a=o(16760),i=o(58335),{array:n,bool:l,func:s,object:c,shape:h,string:d}=o(13980),p=o(2784),{connect:S}=o(57903),_=o(72779),b=o(11865),m=o(11533),u=o(50085),v=o(72489),{setAriaLive:E}=o(15301),f=o(60402),k=o(615),{ContentContainer:g,HeroImage:A}=o(20077),y=o(86587),T=i({displayName:"BookShelf",propTypes:{bookShelf:h({title:d,body:d,noItemsText:d,ariaLabel:d,_headerIcon:d,_heroImage:c}).isRequired,articles:n.isRequired,theme:c.isRequired,isReady:l.isRequired,setAriaLive:s.isRequired},componentDidUpdate(e){!this.props.articles.length&&e.articles.length&&this.props.setAriaLive({message:this.props.bookShelf.noItemsText,isAssertive:!1})},renderTitle(){if(this.props.bookShelf.title)return p.createElement(m,{headingElement:`h${this.context}`,displayTitle:this.props.bookShelf.title,className:"ev-header-title",innerClassName:"ev-header-title-inner"})},renderBody(){if(this.props.bookShelf.body)return p.createElement(b,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:this.props.bookShelf.body})},renderNoItems(){const{bookShelf:e,articles:t}=this.props;if(!t.length)return p.createElement(v,null,p.createElement(b,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:e.noItemsText}))},renderArticles(){const{articles:e}=this.props;return e.length?a(e,(e=>p.createElement(f,{key:e._id,articleId:e._id}))):null},renderHeroImage(){const{_heroImage:e}=this.props.bookShelf;if(null!=e&&e._isEnabled)return p.createElement(y.Provider,{value:this.props.bookShelf.title?this.context+1:this.context},p.createElement(A,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e,t,o,r;const{bookShelf:a,theme:i,isReady:n}=this.props,l=a._headerIcon,s=null===(e=i._extensions._bookShelf)||void 0===e||null===(t=e._settings)||void 0===t?void 0:t._headerIcon,c=l||s,h=a.title||null!==(o=a._heroImage)&&void 0!==o&&o._isEnabled&&null!==(r=a._heroImage)&&void 0!==r&&r.title?this.context+1:this.context;return p.createElement(g,{region:"bookshelf",className:"ev-extension ev-bookShelf",ariaLabel:a.ariaLabel},p.createElement("div",{className:"ev-extension-inner"},n?null:p.createElement(k,null),p.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),p.createElement("div",{className:"ev-header"},p.createElement("div",{className:_("ev-header-inner ev-clearfix",{"ev-no-graphic":!c})},p.createElement("div",{className:"ev-header-left"},this.renderTitle(),this.renderBody()),c&&p.createElement("div",{className:"ev-header-right"},p.createElement(u,{icon:c})))),p.createElement(y.Provider,{value:h},this.renderNoItems(),this.renderArticles())))}});T.contextType=y,e.exports=S((({bookShelf:e,theme:t,location:o,articles:a})=>({bookShelf:e,theme:t,isReady:o.isLocationReady,articles:r(a,(({_bookShelf:e})=>(null==e?void 0:e._isEnabled)&&(null==e?void 0:e._isShelved)))})),{setAriaLive:E})(T)},99384:(e,t,o)=>{const r=o(2784),{connect:a}=o(57903),{updateArticle:i}=o(88072),n=o(23346);e.exports=a(null,{updateArticle:i})((({article:e,ariaLabel:t,updateArticle:o})=>{var a;return null!==(a=e._bookShelf)&&void 0!==a&&a._isEnabled?r.createElement("div",{className:"ev-article-action-bar-item"},r.createElement(n,{variant:"chromeless",icon:e._bookShelf._isShelved?"bookmark":"book2",iconSize:34,"aria-label":t,"aria-pressed":e._bookShelf._isShelved,onClick:()=>o({_id:e._id,_bookShelf:{...e._bookShelf,_isShelved:!e._bookShelf._isShelved}})})):null}))},44405:(e,t,o)=>{const r=o(72579),{Observable:a}=o(28761),{registerTrackingMap:i}=o(90876),{SETUP_APP:n}=o(63444),{addElement:l}=o(51777),{NavigationSideItem:s}=o(39819),c=o(98471),{UPDATE_ARTICLE:h}=o(88072),{trackerSaveSession:d}=o(63062),p=o(99384),S=o(24109),_=o(28593);t.bookShelfSetupEpic=(e,t)=>e.filter((e=>{var o;const r=t.getState();return e.type===n&&(null==r||null===(o=r.bookShelf)||void 0===o?void 0:o._isEnabled)})).mergeMap((()=>{const e=t.getState(),{bookShelf:o}=e,i=l({parent:"navigationSide",name:"bookShelf",component:s,props:{link:"/bookShelf",icon:c("_bookShelf","_navigationIcon","bookmark"),label:o.title}}),n=l({parent:"article",name:"bookShelf",component:p,position:"actionBar",props:{ariaLabel:o.shelveButtonAriaLabel}}),h=l({parent:"router",name:"bookShelf",path:"/bookShelf",exact:!0,component:S,getShouldPersist:e=>r(e,"course._bookShelf._isEnabled",!1)});return a.of(i,n,h)})),t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{if(e.type!==n)return!1;const{bookShelf:o}=t.getState();return o&&o._isEnabled})).do((()=>{i("bookShelf",_,"extensions")})).ignoreElements(),t.saveTrackingEpic=(e,t)=>e.filter((e=>{var o;return e.type===h&&(null===(o=t.getState().bookShelf)||void 0===o?void 0:o._isEnabled)&&e.payload._bookShelf})).mergeMap((()=>a.of(d())))},20319:(e,t,o)=>{const{SETUP_APP:r}=o(63444),a={_isEnabled:!1};e.exports=(e=a,t)=>{if(t.type===r){const{_bookShelf:o}=t.payload.course;return o._isEnabled?{...e,...o}:a}return e._isEnabled?(t.type,e):a}},28593:(e,t,o)=>{const r=o(79421),{store:a}=o(90876),{updateArticle:i}=o(88072);e.exports={_articles:{fieldKey:"_articles",type:"Function",shouldRestore:!0,mapCallback:function(){const{articles:e}=a.getState(),t={};return r(e,(e=>{var o;null!=e&&null!==(o=e._bookShelf)&&void 0!==o&&o._isEnabled&&(t[e._id]={_isShelved:e._bookShelf._isShelved})})),t},restoreCallback:function(e){const{articles:t}=a.getState();r(e._articles,((e,o)=>{const r=t[o];r&&a.dispatch(i({_id:o,_bookShelf:{...null==r?void 0:r._bookShelf,...e}}))}))}}}},63062:(e,t)=>{t.TRACKER_LOAD_DATA="TRACKER_LOAD_DATA",t.TRACKER_SAVE_SESSION="TRACKER_SAVE_SESSION",t.SET_TRACKER_AUTH="SET_TRACKER_AUTH",t.SAVE_TRACKER_DONE="SAVE_TRACKER_DONE",t.trackerLoadData=e=>({type:t.TRACKER_LOAD_DATA,payload:e}),t.trackerSaveSession=e=>({type:t.TRACKER_SAVE_SESSION,payload:e}),t.setTrackerAuth=e=>({type:t.SET_TRACKER_AUTH,payload:e}),t.saveTrackingDone=e=>({type:t.SAVE_TRACKER_DONE,payload:e})},98471:(e,t,o)=>{const r=o(72579),{store:a}=o(90876);e.exports=function(e,t,o){const{course:i,theme:n}=a.getState(),l=i[e],s=r(l,t),c=r(n,["_extensions",e,"_settings",t]);return s||c||o}},6443:(e,t,o)=>{const r=o(72579),{Observable:a}=o(28761),{setLocationReadyState:i,PUSH_LOCATION:n}=o(63444),l=o(36151),s=o(69610);e.exports=(e,t)=>(o,c)=>o.filter((({type:t})=>{if(t!==n)return;const{navigationStatus:o,path:r}=c.getState().location;return"plugin"===o&&r[0]===e})).switchMap((()=>{const o=c.getState(),{device:n,course:h}=o;let d;if(d=t?t(o):r(h,[`_${e}`,"_heroImage"]),!d||!d._graphic)return a.empty();const p=l(d._graphic.src,d._graphic.srcAdvanced,!0);return p?a.concat(a.of(i(!1)),a.bindCallback(s)(p,!1).map((()=>i(!0)))):a.empty()}))}}]);