"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4900],{13961:(e,t)=>{t.ORDERING_ITEM_MOVED="ORDERING_ITEM_MOVED",t.orderingItemMoved=(e,n,i)=>({type:t.ORDERING_ITEM_MOVED,payload:{componentId:e,itemId:n,index:i}})},59913:(e,t,n)=>{const i=n(16760),s=n(58335),o=n(13980),r=n(2784),{Component:c}=n(58720),a=n(89493),l=n(96235),d=n(88934),m=n(43855),p=n(76372),u=s({displayName:"Ordering",propTypes:{component:o.object.isRequired,actionButtonClicked:o.func.isRequired,setComponentAsReady:o.func.isRequired,setComponentAsViewed:o.func.isRequired,setComponentAsStarted:o.func.isRequired,showFeedback:o.func.isRequired,orderingItemMoved:o.func.isRequired,shouldHideMarking:o.bool,styles:o.object},getInitialState:()=>({_selectedItemId:null}),componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback(!1)},UNSAFE_componentWillReceiveProps(e){const{state:t}=this,{component:n}=e;!t._selectedItemId||!n._isSubmitted&&n._Enabled||this.setState({_selectedItemId:null})},showFeedback(e=!0){const t=a(this.props.component),n=e&&this.props.component._isComplete?{refocusSelector:".ev-buttons-feedback"}:{};this.props.showFeedback(t,n)},onMoveItemClicked(e,t){const{props:n}=this;this.setState({_selectedItemId:null}),n.component._hasStarted||n.setComponentAsStarted(n.component._id),n.orderingItemMoved(n.component._id,e._id,t)},onVisibilityChange(...e){m(...e,this,this.props.setComponentAsViewed)},renderItems(){const{props:e,state:t}=this,n=e.component[e.component._selectedAnswerState];return i(n,((i,s)=>r.createElement(p,{key:i._id,item:i,index:s,isReady:e.component._isReady,isSubmitted:e.component._isSubmitted,isEnabled:e.component._isEnabled,isCorrect:e.component._isCorrect,isComplete:e.component._isComplete,cancelButtonAriaLabel:e.component.cancelButtonAriaLabel,totalItems:n.length,isSelected:i._id===t._selectedItemId,onItemClicked:()=>this.setState({_selectedItemId:i._id}),onCancelClicked:()=>this.setState({_selectedItemId:null}),onMoveItemClicked:this.onMoveItemClicked,shouldHideMarking:e.shouldHideMarking})))},render(){const{props:e}=this;return r.createElement(c,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:d(e),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback},r.createElement("div",{className:l(e.component)},r.createElement("div",{className:"ev-ordering-container"},r.createElement("div",{className:"ev-ordering-items"},r.createElement("div",{className:"ev-ordering-items-inner"},this.renderItems())))))}});e.exports=u},76372:(e,t,n)=>{const i=n(58335),{bool:s,func:o,number:r,object:c,string:a}=n(13980),l=n(32823),d=n(2784),m=n(72779),{Motion:p,spring:u}=n(96001),_=n(94345),b=n(10817),h=n(51587),C=i({displayName:"OrderingItem",propTypes:{index:r.isRequired,item:c.isRequired,totalItems:r.isRequired,isEnabled:s,isSubmitted:s,isReady:s,isCorrect:s,isComplete:s,cancelButtonAriaLabel:a,onItemClicked:o.isRequired,isSelected:s.isRequired,onCancelClicked:o.isRequired,onMoveItemClicked:o.isRequired,shouldHideMarking:s},mixins:[l],getInitialState:()=>({isMoving:!1}),UNSAFE_componentWillReceiveProps(e){const{props:t}=this;e.index!==t.index&&t.isReady&&this.setState({translateY:-100*(e.index-t.index),isMoving:!0})},componentDidUpdate(e){!e.isSelected||this.props.isSelected||this.props.isSubmitted||this._item.focus()},onItemClicked(e){e.preventDefault(),e.stopPropagation();const{props:t}=this;!t.isSubmitted&&t.isEnabled&&t.onItemClicked(t.item)},getItemClassName(){const{props:e,state:t}=this;return m("ev-ordering-item ev-component-item",{"ev-disabled":!e.isEnabled,"ev-correct":e.isCorrect&&e.isComplete,"ev-incorrect":!e.isCorrect&&e.isComplete,"ev-item-moving":t.isMoving})},getDefaultStyle(){const{isMoving:e,translateY:t}=this.state;return{translateY:e?t:0}},getComputedStyle:e=>({transform:`translate3d(0, ${e.translateY}%, 0)`}),renderMarkingIcon(){const{isComplete:e,shouldHideMarking:t,item:n}=this.props;if(e&&!t)return d.createElement("div",{className:"ev-ordering-item-state"},d.createElement(_,{className:"ev-ordering-icon",isCorrect:n._isCorrect}))},renderOrderingLabels(){const{props:e}=this;if(e.isSelected)return d.createElement(h,{item:e.item,currentIndex:e.index,totalItems:e.totalItems,cancelButtonArialLabel:e.cancelButtonAriaLabel,onCancelClicked:e.onCancelClicked,onMoveItemClicked:e.onMoveItemClicked})},render(){const{props:e}=this;return d.createElement(p,{key:e.index,defaultStyle:this.getDefaultStyle(),style:{translateY:u(0)},onRest:()=>this.setState({isMoving:!1})},(t=>d.createElement("div",{className:this.getItemClassName(),style:this.getComputedStyle(t)},d.createElement("div",{className:"ev-ordering-item-inner ev-component-item-inner"},d.createElement("button",{className:"ev-ordering-item-text",disabled:!e.isEnabled,onClick:this.onItemClicked,tabIndex:e.isSelected?-1:0,ref:e=>this._item=e},d.createElement("span",{className:"ev-ordering-item-number"},e.index+1),d.createElement(b,{element:"span",className:"ev-ordering-item-text-span",html:e.item.text})),this.renderOrderingLabels(),this.renderMarkingIcon()))))}});e.exports=C},51587:(e,t,n)=>{const i=n(61258),s=n(58335),o=n(13980),r=n(32823),c=n(2784),{Motion:a,spring:l}=n(96001),d=n(50085),m=s({displayName:"OrderingItemLabels",propTypes:{item:o.object.isRequired,currentIndex:o.number.isRequired,totalItems:o.number.isRequired,cancelButtonAriaLabel:o.string,onCancelClicked:o.func.isRequired,onMoveItemClicked:o.func.isRequired},mixins:[r],getInitialState:()=>({opacity:l(1)}),componentDidMount(){this._done.focus()},onCancelClicked(e){e.preventDefault(),e.stopPropagation(),this._isUnmounting=!0,this.setState({opacity:l(0,{stiffness:150,damping:15})})},onMoveItemClicked(e){const{props:t}=this;t.onMoveItemClicked(t.item,e)},onRest(){this._isUnmounting&&this.props.onCancelClicked()},renderLabels(){const{props:e}=this;return i(e.totalItems,(t=>t===e.currentIndex?null:c.createElement("a",{key:t,href:"#",className:"ev-ordering-order-label",role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.onMoveItemClicked(t)}},c.createElement("span",{className:"ev-ordering-item-number"},t+1))))},render(){const{props:e}=this;return c.createElement(a,{defaultStyle:{opacity:0},style:this.state,onRest:this.onRest},(t=>c.createElement("div",{className:"ev-ordering-order-labels ev-clearfix",style:t},c.createElement("div",{className:"ev-ordering-order-labels-inner ev-clearfix"},this.renderLabels()),c.createElement("a",{ref:e=>this._done=e,href:"#",className:"ev-ordering-order-labels-done",role:"button","aria-label":e.cancelButtonAriaLabel,onClick:this.onCancelClicked},c.createElement(d,{icon:"cross"})))))}});e.exports=m},61488:(e,t,n)=>{const{registerComponent:i}=n(90876),s=n(59913),o=n(12635),{orderingItemMoved:r}=n(13961);i("ordering",{component:s,actions:{orderingItemMoved:r},reducer:o,trackingMap:n(60111)})},12635:(e,t,n)=>{const i=n(60019),s=n(46152),o=n(16760),r=n(829),c=n(92070),a=n(90882),{SETUP_COMPONENT:l,SETUP_ANSWER_STATE:d,SUBMIT_QUESTION:m,SHOW_CORRECT_ANSWER:p,HIDE_CORRECT_ANSWER:u}=n(29933),{ORDERING_ITEM_MOVED:_}=n(13961);function b(e){return i({},e,{_selectedAnswerState:"_correctAnswer"})}e.exports=function(e,t){switch(t.type){case l:return function(e){return e._isComplete?e._isComplete&&!e._hasUserAnswered&&e._isCorrect&&(e=b(e)):e=i({},e,{_items:s(e._items),_canSubmit:!0}),e}(e);case d:return function(e){return e._correctAnswer=o(r(e._items,"itemIndex"),(e=>i({},e,{_isCorrect:!0}))),e}(e);case _:return function(e,t){const{itemId:n,index:s}=t.payload;let o;const r=c(e._items,(e=>{const t=e._id===n;return t&&(o=e),t}));return r.splice(s,0,o),i({},e,{_items:r})}(e,t);case m:return function(e){const t=o(e._items,((e,t)=>i({},e,{_isCorrect:e.itemIndex===t}))),n=a(t,(e=>e._isCorrect)).length,s=n===t.length;return i({},e,{_items:t,_isCorrect:s,_isPartlyCorrect:!s&&!!n,_hasUserAnswered:!0})}(e);case p:return b(e);case u:return function(e){return i({},e,{_selectedAnswerState:"_items"})}(e);default:return e}}},60111:e=>{e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},text:{fieldKey:"text",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}},89493:(e,t,n)=>{const{store:i}=n(90876),s=n(96075);function o(e,t,n){const o=e._feedback[n],r=s(o);return t&&!r?i.getState().course._globals._feedbackText[n]:r?o:null}function r(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?i.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:o(e,t,"_correctGraphic"),feedbackNavigation:r(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,s=i.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(n?s.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:o(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrect")}:{feedbackMessage:(n?s.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:o(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,s=i.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!n||!s.incorrectNotFinalFeedback&&n?{feedbackMessage:(n?s.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:o(e,n,"_incorrectFinalGraphic"),feedbackNavigation:r(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(n?s.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:o(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:r(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:i}=e;return!0===i&&!0===n._isReady&&!0!==n[t]}},96235:(e,t,n)=>{const i=n(72779);e.exports=e=>i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,t,n,i,s){i&&i.props&&i.props.component?(t.top&&(i.isInviewTop=!0),t.bottom&&(i.isInviewBottom=!0),i.isInviewTop&&i.isInviewBottom&&s&&s(i.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);