"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5135],{27866:(e,t)=>{t.MEDIA_METRICS_CHANGED="MEDIA_METRICS_CHANGED",t.videoMetricsChanged=(e,o)=>({type:t.MEDIA_METRICS_CHANGED,payload:{componentId:e,metrics:o}})},35327:(e,t,o)=>{const n=o(58335),{bool:i,func:s,object:p,string:r}=o(13980),d=o(2784),{Component:l}=o(58720),a=o(96235),c=o(70913),{connect:m}=o(57903),u=o(63867),h=o(88934),_=o(43855),C=o(89793),y=n({displayName:"Media",propTypes:{component:p.isRequired,setComponentAsReady:s.isRequired,setComponentAsViewed:s.isRequired,setComponentAsStarted:s.isRequired,setComponentAsComplete:s.isRequired,articleStyle:r.isRequired,styles:p,videoMetricsChanged:s.isRequired,screenSize:r.isRequired,animationEnded:i},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},setComponentAsComplete(){this.props.setComponentAsComplete(this.props.component._id)},setComponentAsViewed(){this.props.setComponentAsViewed(this.props.component._id)},onVideoPlay(){const{component:e}=this.props;e._hasStarted||this.props.setComponentAsStarted(e._id),e._isComplete||"play"!==e._setCompletionOn||this.setComponentAsComplete()},onVideoEnded(){const{component:e}=this.props;e._isComplete||"ended"!==e._setCompletionOn||this.setComponentAsComplete()},onTranscriptViewed(){this.props.component._isComplete||this.setComponentAsComplete()},onVisibilityChange(...e){_(...e,this,"inview"===this.props.component._setCompletionOn?this.props.setComponentAsComplete:this.props.setComponentAsViewed)},onMetricsChanged(e){const{component:t,videoMetricsChanged:o}=this.props;o(t._id,e)},getVideoSrc(){const{component:e,screenSize:t}=this.props,o=e._media;if(o){if(o._isExternalLink)return o.externalUrl;if("small"===t&&o.mobileMp4)return c(o.mobileMp4);if(o.mp4)return c(o.mp4)}},getAudioDescriptionSrc(){var e;const{component:t}=this.props;return null!==(e=t._audio)&&void 0!==e&&e._isEnabled?c(t._audio.mp3):null},getHasBigPlayButton(){const{_media:e}=this.props.component;return!(null!=e&&e._shouldHidePlayerControls||null!=e&&e._shouldHidePlayButton)},renderVideoPlayer(){var e,t,o,n,i,s,p,r,l;const{component:a}=this.props,m=this.getVideoSrc();if(m)return d.createElement(C,{id:a._id,src:m,controls:!(null!==(e=a._media)&&void 0!==e&&e._shouldHidePlayerControls),posterSrc:c(null===(t=a._media)||void 0===t?void 0:t.poster),hasBigPlayButton:this.getHasBigPlayButton(),autoPlay:null===(o=a._media)||void 0===o?void 0:o._shouldAutoPlay,loop:null===(n=a._media)||void 0===n?void 0:n._shouldLoop,metrics:a._metrics,articleStyle:this.props.articleStyle,subtitlesSrc:c(null===(i=a._subtitles)||void 0===i?void 0:i.src),subtitlesLabel:null===(s=a._subtitles)||void 0===s?void 0:s.label,transcriptType:null!==(p=a._transcript)&&void 0!==p&&p._shouldOpenTranscriptInPopup?"popup":"collapse",transcriptText:null===(r=a._transcript)||void 0===r?void 0:r.body,transcriptButtonText:null===(l=a._transcript)||void 0===l?void 0:l.button,transcriptClassName:"ev-component-body",transcriptInnerClassName:"ev-component-body-inner",audioDescriptionSrc:this.getAudioDescriptionSrc(),animationEnded:this.props.animationEnded,onPlay:this.onVideoPlay,onEnded:this.onVideoEnded,onTranscriptView:this.onTranscriptViewed,onMetricsChange:this.onMetricsChanged})},render(){const{props:e}=this,t=h(e,"inview"===e.component._setCompletionOn?"_isComplete":"_hasBeenViewed");return d.createElement(l,{component:e.component,styles:e.styles,onVisibilityChange:this.onVisibilityChange,isVisibilitySensorActive:t},d.createElement("div",{className:a(e.component)},this.renderVideoPlayer()))}});e.exports=m(((e,t)=>({articleStyle:u(e,t.component,"article")._classes})))(y)},8201:(e,t,o)=>{const{registerComponent:n}=o(90876),i=o(35327),s=o(40646),p=o(35862),{videoMetricsChanged:r}=o(27866);n("media",{component:i,trackingMap:s,reducer:p,actions:{videoMetricsChanged:r}})},35862:(e,t,o)=>{const n=o(60019),{MEDIA_METRICS_CHANGED:i}=o(27866);e.exports=(e,t)=>t.type===i?n({},e,{_metrics:t.payload.metrics}):e},40646:e=>{e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:n}=e;return!0===n&&!0===o._isReady&&!0!==o[t]}},96235:(e,t,o)=>{const n=o(72779);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,t,o,n,i){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);