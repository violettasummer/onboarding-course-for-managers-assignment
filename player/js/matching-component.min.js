"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[991],{84272:(e,t)=>{t.MATCHING_VALUE_CHANGED="MATCHING_VALUE_CHANGED",t.matchingValueChanged=function(e,i,n){return{type:t.MATCHING_VALUE_CHANGED,payload:{componentId:e,itemId:i,value:n}}}},75524:(e,t,i)=>{const n=i(16760),o=i(58335),{bool:s,func:r,object:c}=i(13980),a=i(2784),l=i(72779),{Component:d}=i(58720),p=i(89493),_=i(96235),u=i(88934),m=i(43855),h=i(38378),b=o({displayName:"Matching",propTypes:{component:c.isRequired,actionButtonClicked:r.isRequired,setComponentAsReady:r.isRequired,setComponentAsViewed:r.isRequired,setComponentAsStarted:r.isRequired,showFeedback:r.isRequired,matchingValueChanged:r.isRequired,shouldHideMarking:s,styles:c,isRTL:s,course:c},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback(!1)},showFeedback(e=!0){const t=p(this.props.component),i=e&&this.props.component._isComplete?{refocusSelector:".ev-buttons-feedback"}:{};this.props.showFeedback(t,i)},onMatchingValueChange(e,t){const{props:i}=this;i.component._hasStarted||i.setComponentAsStarted(i.component._id),i.matchingValueChanged(i.component._id,e,t)},onVisibilityChange(...e){m(...e,this,this.props.setComponentAsViewed)},getWidgetClassName(){const{component:e}=this.props;return l(_(e),{"ev-disabled":!e._isEnabled,"ev-correct":e._isComplete&&e._isCorrect,"ev-complete":e._isComplete,"ev-submitted":e._isSubmitted})},renderItems(){const{component:e,isRTL:t,shouldHideMarking:i,course:o}=this.props,s=e[e._selectedAnswerState];return n(s,(n=>a.createElement(h,{key:n._id,item:n,componentId:e._id,placeholder:e.placeholder,isEnabled:e._isEnabled,isSubmitted:e._isSubmitted,isComplete:e._isComplete,onChange:this.onMatchingValueChange,isRTL:t,shouldHideMarking:i,correctIconAriaLabel:o._globals.correctIconAriaLabel,incorrectIconAriaLabel:o._globals.incorrectIconAriaLabel})))},render(){const{props:e}=this;return a.createElement(d,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:u(e),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback},a.createElement("div",{className:this.getWidgetClassName()},this.renderItems()))}});e.exports=b},38378:(e,t,i)=>{const n=i(16760),o=i(58335),{bool:s,func:r,object:c,string:a}=i(13980),l=i(32823),d=i(2784),p=i(72779),_=i(59330).ZP,u=i(50085),m=i(10817),h=o({displayName:"MatchingItem",propTypes:{item:c.isRequired,isEnabled:s,isComplete:s,isSubmitted:s,placeholder:a,componentId:a.isRequired,onChange:r.isRequired,shouldHideMarking:s,isRTL:s,correctIconAriaLabel:a,incorrectIconAriaLabel:a},mixins:[l],getInitialState:()=>({_isOpen:!1}),getClassName(){const{item:e,isEnabled:t,isComplete:i,isSubmitted:n}=this.props;return p("ev-matching-item",{"ev-correct":e._isCorrect&&!t,"ev-incorrect":!e._isCorrect&&!t,"ev-disabled":!t,"ev-submitted":n,"ev-complete":i})},getIcon(){const{isComplete:e,shouldHideMarking:t,item:i}=this.props;return!e||t?this.state._isOpen?"chevron-up":"chevron-down":i._isCorrect?"check":"cross"},getIconClassName(){const{item:e,isComplete:t,shouldHideMarking:i}=this.props;return p("ev-matching-select-icon",{"ev-matching-correct-icon":t&&e._isCorrect&&!i,"ev-matching-incorrect-icon":t&&!e._isCorrect&&!i})},renderSelect(e){const{item:t,isRTL:i,isEnabled:o,isSubmitted:s,placeholder:r,onChange:c}=this.props,a=this.getIcon(),l=this.getIconClassName(),p=!o||s;return d.createElement(_,{instanceId:e,name:`matching-select-${t._id}`,"aria-labelledby":`${e}-title react-select-${e}--value ${e}-marking-label`,className:"ev-matching-select",value:t.value||"",onChange:e=>c(t._id,e),options:n(t._options,(({_id:e,text:t})=>({value:e,label:t}))),placeholder:r||"",disabled:p,tabIndex:p?-1:0,searchable:!1,simpleValue:!0,clearable:!1,rtl:i,arrowRenderer:()=>d.createElement(u,{className:l,icon:a}),onOpen:()=>this.setState({_isOpen:!0}),onClose:()=>this.setState({_isOpen:!1})})},renderHiddenMarkingLabel(e){const{isComplete:t,shouldHideMarking:i}=this.props;if(!t||i)return;const{item:n,correctIconAriaLabel:o,incorrectIconAriaLabel:s}=this.props;return d.createElement("span",{id:`${e}-marking-label`,"aria-hidden":!0,className:"ev-display-none"},n._isCorrect?o:s)},render(){const{props:e}=this,t=`${e.componentId}-${e.item._id}`;return d.createElement("div",{className:this.getClassName()},d.createElement(m,{id:`${t}-title`,className:"ev-matching-item-title ev-component-item-title",html:e.item.text}),this.renderSelect(t),this.renderHiddenMarkingLabel(t))}});e.exports=h},78599:(e,t,i)=>{const{registerComponent:n}=i(90876),o=i(75524),s=i(65245),{matchingValueChanged:r}=i(84272);n("matching",{component:o,actions:{matchingValueChanged:r},reducer:s,trackingMap:i(830)})},65245:(e,t,i)=>{const n=i(16760),o=i(46152),s=i(55281),{SETUP_COMPONENT:r,SETUP_ANSWER_STATE:c,RESET_QUESTION:a,SUBMIT_QUESTION:l,SHOW_CORRECT_ANSWER:d,HIDE_CORRECT_ANSWER:p}=i(29933),{MATCHING_VALUE_CHANGED:_}=i(84272);function u(e){return{...e,_selectedAnswerState:"_correctAnswer"}}function m(e){const t=n(e._items,(e=>({...e,value:void 0,_isCorrect:void 0})));return{...e,_items:t,_canSubmit:!1}}e.exports=(e,t)=>{switch(t.type){case r:return function(e){if(e._isComplete)e._isComplete&&!e._hasUserAnswered&&(e=e._isCorrect?u(e):function(e){return{...e,_selectedAnswerState:"_incorrectAnswer"}}(e));else{if(e._isRandom){const t=n(e._items,(e=>({...e,_options:o(e._options)})));e={...e,_items:t}}e=m(e)}return e}(e);case c:return function(e){return e._correctAnswer=n(e._items,(e=>{const t=s(e._options,"_isCorrect");return{...e,_isCorrect:!0,value:t?t._id:null}})),e._incorrectAnswer=n(e._items,(e=>e._shouldBeSelected?{...e}:{...e,_isCorrect:!1,_isSelected:!0})),e}(e);case _:return function(e,t){if(e._isSubmitted)return e;let i=!0;const o=n(e._items,(e=>(e._id===t.payload.itemId&&(e={...e,value:t.payload.value}),e.value||(i=!1),e)));return{...e,_items:o,_canSubmit:i}}(e,t);case l:return function(e){if(!e._canSubmit)return e;let t=!1,i=0;const o=n(e._items,(e=>{const n=!!s(e._options,(t=>t._isCorrect&&t._id===e.value));return n&&(t=!0,i+=1),{...e,_isCorrect:n}})),r=i===o.length;return{...e,_items:o,_isCorrect:r,_isPartlyCorrect:!r&&t,_hasUserAnswered:!0}}(e);case d:return u(e);case p:return function(e){return{...e,_selectedAnswerState:"_items"}}(e);case a:return m(e);default:return e}}},830:e=>{e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},value:{fieldKey:"value",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}},89493:(e,t,i)=>{const{store:n}=i(90876),o=i(96075);function s(e,t,i){const s=e._feedback[i],r=o(s);return t&&!r?n.getState().course._globals._feedbackText[i]:r?s:null}function r(e,t){const i=e._feedbackNavigation;if(i&&i[t]&&i[t]._isEnabled&&i[t]._linkType)return{_link:i[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?n.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:s(e,t,"_correctGraphic"),feedbackNavigation:r(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,i=t._shouldUseGlobalPartlyCorrectFeedback,o=n.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(i?o.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,i,"_partlyCorrectFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrect")}:{feedbackMessage:(i?o.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,i,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,i=t._shouldUseGlobalIncorrectFeedback,o=n.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!i||!o.incorrectNotFinalFeedback&&i?{feedbackMessage:(i?o.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,i,"_incorrectFinalGraphic"),feedbackNavigation:r(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(i?o.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,i,"_incorrectNotFinalGraphic"),feedbackNavigation:r(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:n}=e;return!0===n&&!0===i._isReady&&!0!==i[t]}},96235:(e,t,i)=>{const n=i(72779);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,t,i,n,o){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);