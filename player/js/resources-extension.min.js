"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6211],{12913:(e,t)=>{t.RESOURCES_FILTER_CHANGED="RESOURCES_FILTER_CHANGED",t.resourcesFilterChanged=e=>({type:t.RESOURCES_FILTER_CHANGED,payload:e})},74076:(e,t,r)=>{const s=r(90882),i=r(16760),n=r(79421),a=r(58335),o=r(13980),c=r(2784),{connect:l}=r(57903),u=r(72779),{ContentContainer:m,HeroImage:d}=r(20077),p=r(615),h=r(11865),v=r(11533),_=r(50085),E=r(72489),g=r(86587),{resourcesFilterChanged:y}=r(12913),b=r(70240),f=r(48518),N=a({displayName:"Resources",propTypes:{theme:o.object.isRequired,isReady:o.bool.isRequired,resources:o.object.isRequired,resourcesFilterChanged:o.func.isRequired},onFilterChange(e){this.props.resourcesFilterChanged(e.target.value)},getResourceTypes(){const e=[];return n(this.props.resources._resourcesItems,(({_type:t})=>{e.includes(t)||e.push(t)})),e},renderTitle(){if(this.props.resources.title)return c.createElement(v,{headingElement:`h${this.context}`,displayTitle:this.props.resources.title,className:"ev-header-title",innerClassName:"ev-header-title-inner"})},renderDescription(){if(this.props.resources.description)return c.createElement(h,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:this.props.resources.description})},renderFilter(){const{resources:e}=this.props,t=this.getResourceTypes();if(t.length<=1)return null;t.unshift(b.ALL);const r=i(t,(t=>c.createElement("option",{key:t,value:t},e._filterButtons[t])));return c.createElement("div",{className:"ev-resources-filter ev-action-bar"},c.createElement("div",{className:"ev-resources-filter-inner ev-action-bar-inner"},c.createElement("select",{value:e.filterType,onChange:this.onFilterChange,"aria-label":e.filterAriaLabel},r)))},renderItems(){const{resources:e}=this.props,t=s(e._resourcesItems,{_isVisible:!0});return i(t,(e=>c.createElement(f,{key:e._id,item:e})))},renderContent(){if(this.props.resources._resourcesItems)return c.createElement(E,null,c.createElement("ul",{className:"ev-list-items"},this.renderItems()))},renderHeroImage(){const{_heroImage:e}=this.props.resources;if(null!=e&&e._isEnabled)return c.createElement(g.Provider,{value:this.props.resources.title?this.context+1:this.context},c.createElement(d,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e,t,r,s;const{resources:i,theme:n,isReady:a}=this.props,o=i._headerIcon,l=null===(e=n._extensions._resources)||void 0===e||null===(t=e._settings)||void 0===t?void 0:t._headerIcon,d=o||l,h=i.title||null!==(r=i._heroImage)&&void 0!==r&&r._isEnabled&&null!==(s=i._heroImage)&&void 0!==s&&s.title?this.context+1:this.context;return c.createElement(m,{region:"resources",className:"ev-extension ev-resources",ariaLabel:i.ariaLabel},c.createElement("div",{className:"ev-extension-inner"},a?null:c.createElement(p,null),c.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),c.createElement("div",{className:u("ev-header",{"ev-header-with-action-bar":this.getResourceTypes().length>1})},c.createElement("div",{className:u("ev-header-inner ev-clearfix",{"ev-no-graphic":!d})},c.createElement("div",{className:"ev-header-left"},this.renderTitle(),this.renderDescription()),d&&c.createElement("div",{className:"ev-header-right"},c.createElement(_,{icon:d})))),this.renderFilter(),c.createElement(g.Provider,{value:h},this.renderContent())))}});N.contextType=g,e.exports=l((e=>({resources:e.resources,theme:e.theme,isReady:e.location.isLocationReady})),{resourcesFilterChanged:y})(N)},48518:(e,t,r)=>{const s=r(13980),i=r(2784),n=r(70913),a=r(11865),o=r(11533),c=r(86587),l=({item:e})=>{const t=i.useContext(c);return i.createElement("li",{className:"ev-resources-item ev-list-item"},i.createElement("div",{className:"ev-resources-item ev-list-item-inner"},i.createElement("div",{className:"ev-list-item-left"},i.createElement(o,{headingElement:`h${t}`,displayTitle:e.title,className:"ev-resources-item-title ev-list-item-title",innerClassName:"ev-resources-item-title-inner ev-list-item-title-inner"}),i.createElement(a,{className:"ev-resources-item-description",innerClassName:"ev-resources-item-description-inner",body:e.description})),i.createElement("div",{className:"ev-list-item-right"},(()=>{const t=e.view||"View",r=e._asset?n(e._asset):e._link;return i.createElement("a",{className:"ev-resources-item-open ev-button ev-primary",target:"_blank",href:r,rel:"noreferrer"},t)})())))};l.propTypes={item:s.shape({title:s.string,description:s.string,view:s.string,_asset:s.object,_link:s.string}).isRequired},e.exports=l},32670:(e,t,r)=>{var s=r(28761);const i=r(72579),{SETUP_APP:n}=r(63444),{addElement:a}=r(51777),{NavigationSideItem:o}=r(39819),c=r(98471),l=r(74076);t.resourcesElementsEpic=(e,t)=>e.filter((e=>{var r;return e.type===n&&(null===(r=t.getState().course._resources)||void 0===r?void 0:r._isEnabled)})).mergeMap((()=>{const e=t.getState().course._resources,r=[a({parent:"router",name:"resources",path:"/resources",exact:!0,component:l,getShouldPersist:e=>i(e,"course._resources._isEnabled",!1)})];return e._shouldDisableNavigationSideItem||r.push(a({parent:"navigationSide",name:"resources",component:o,props:{link:"/resources",icon:c("_resources","_navigationIcon","box"),label:e.title}})),s.Observable.of(...r)}))},70240:e=>{e.exports={ALL:"all",DOCUMENT:"document",LINK:"link"}},45435:(e,t,r)=>{const s=r(16760),{SETUP_APP:i}=r(63444),{RESOURCES_FILTER_CHANGED:n}=r(12913),a=r(70240),o={filterType:a.ALL};function c(e,t){return s(e,(e=>t===a.ALL||e._type===t?{...e,_isVisible:!0}:{...e,_isVisible:!1}))}e.exports=(e=o,t)=>{if(t.type===i){const e=t.payload.course._resources;return e&&e._isEnabled?{...o,...e,_resourcesItems:c(e._resourcesItems,o.filterType)}:o}return e._isEnabled?t.type===n?{...e,filterType:t.payload,_resourcesItems:c(e._resourcesItems,t.payload)}:e:o}},64326:(e,t,r)=>{const{registerReducer:s,registerEpics:i}=r(90876),n=r(6443),a=r(45435),{resourcesElementsEpic:o}=r(32670);s("resources",a),i(o,n("resources"))},98471:(e,t,r)=>{const s=r(72579),{store:i}=r(90876);e.exports=function(e,t,r){const{course:n,theme:a}=i.getState(),o=n[e],c=s(o,t),l=s(a,["_extensions",e,"_settings",t]);return c||l||r}},6443:(e,t,r)=>{const s=r(72579),{Observable:i}=r(28761),{setLocationReadyState:n,PUSH_LOCATION:a}=r(63444),o=r(36151),c=r(69610);e.exports=(e,t)=>(r,l)=>r.filter((({type:t})=>{if(t!==a)return;const{navigationStatus:r,path:s}=l.getState().location;return"plugin"===r&&s[0]===e})).switchMap((()=>{const r=l.getState(),{device:a,course:u}=r;let m;if(m=t?t(r):s(u,[`_${e}`,"_heroImage"]),!m||!m._graphic)return i.empty();const d=o(m._graphic.src,m._graphic.srcAdvanced,!0);return d?i.concat(i.of(n(!1)),i.bindCallback(c)(d,!1).map((()=>n(!0)))):i.empty()}))}}]);