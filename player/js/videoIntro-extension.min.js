"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6538],{75691:(e,t)=>{t.VIDEO_INTRO_METRICS="VIDEO_INTRO_METRICS",t.videoIntroMetricsChange=e=>({type:t.VIDEO_INTRO_METRICS,payload:e})},43542:(e,t,o)=>{const s=o(98923),i=o(58335),{bool:r,func:n,object:l,string:c}=o(13980),a=o(2784),d=o(72779),u=o(23346),p=o(89793),_=o(70913),h=i({displayName:"VideoIntroFullScreen",propTypes:{device:l.isRequired,closeFullScreen:n.isRequired,_metrics:l,videoIntroMetricsChange:n.isRequired,_shouldCropVideo:r,_isFullScreenCloseButtonAtBottom:r,_shouldEnableCloseButtonOnPlay:r,_video:l,_poster:l,_subtitles:l,_closeButtonText:c},getInitialState:()=>({_isVisible:!0,_hasVideoStarted:!1}),onPlay(){this.setState({_isVideoPlaying:!0,_hasVideoStarted:!0})},onPause(){this.setState({_isVideoPlaying:!1})},onMetricsChange(e){this.props.videoIntroMetricsChange(e)},onCloseClicked(e){e.preventDefault(),e.currentTarget.blur();const{closeFullScreen:t}=this.props;this.setState({_isVisible:!1},(()=>{s((()=>{t()}),300)}))},getStyle(){const{windowHeight:e,windowWidth:t}=this.props.device;return{width:`${t}px`,height:`${e}px`,opacity:this.state._isVisible?1:0}},getClassName(){return d("ev-video-intro-fullscreen ev-use-custom-play-button",{"ev-is-cropped-video":this.props._shouldCropVideo,"ev-is-centered-video":!this.props._shouldCropVideo,"ev-is-playing":this.state._isVideoPlaying})},renderVideo(){const e=_(this.props._video);if(!e)return;const{_shouldCropVideo:t,_subtitles:o,_metrics:s,_poster:i}=this.props;return a.createElement(p,{className:"ev-video-intro-fullscreen-video",src:e,posterSrc:_(i),controls:!t,hasFullScreen:!1,metrics:s,subtitlesSrc:t?null:_(null==o?void 0:o.src),subtitlesLabel:null==o?void 0:o.label,onPlay:this.onPlay,onPause:this.onPause,onMetricsChange:this.onMetricsChange})},render(){const{props:e,state:t}=this;return a.createElement("div",{className:this.getClassName(),style:this.getStyle()},a.createElement("div",{className:"ev-video-intro-fullscreen-video-container"},this.renderVideo()),a.createElement("div",{className:d("ev-video-intro-fullscreen-actions",{"ev-is-bottom":e._isFullScreenCloseButtonAtBottom})},a.createElement(u,{text:e._closeButtonText,isDisabled:e._shouldEnableCloseButtonOnPlay&&!t._hasVideoStarted,onClick:this.onCloseClicked})))}});e.exports=h},14736:(e,t,o)=>{const{connect:s}=o(57903),i=o(65318),{videoIntroMetricsChange:r}=o(75691);e.exports=s((({videoIntro:e,course:{_videoIntro:t}})=>({src:t._video,poster:t._poster,subtitles:t._subtitles,transcript:t._transcript,shouldAutoPlay:t._shouldAutoPlay,metrics:e._metrics})),{onMetricsChange:r})(i)},22383:(e,t,o)=>{const s=o(60019),i=o(2784),{connect:r}=o(57903),{videoIntroMetricsChange:n}=o(75691),l=o(43542);e.exports=r((e=>s({},e.course._videoIntro,e.videoIntro,{theme:e.theme})),{videoIntroMetricsChange:n})((e=>i.createElement(l,e)))},60050:(e,t,o)=>{const{connect:s}=o(57903),i=o(65163);e.exports=s((({course:{_id:e,_videoIntro:t}})=>{var o,s;return{id:e,service:null===(o=t._videoStream)||void 0===o?void 0:o._service,options:null===(s=t._videoStream)||void 0===s?void 0:s._options,transcript:t._transcript}}))(i)},26307:(e,t,o)=>{const s=o(2784),{SETUP_APP:i}=o(63444),{openFullScreen:r}=o(52790),{registerTrackingMap:n}=o(90876),{PAGE_OR_MENU_IS_READY:l}=o(68767),{addPrompt:c}=o(90672),a=o(22383),d=o(14736),u=o(60050),p=o(83931);t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{const{_videoIntro:o}=t.getState().course;return o&&o._isEnabled&&e.type===i})).do((()=>{n("videoIntro",p,"extensions")})).ignoreElements(),t.showVideoIntroEpic=(e,t)=>e.filter((({type:e})=>{if(e!==l)return!1;const{app:{isPagePreview:o},course:s,location:i}=t.getState(),r=s._videoIntro;return!(o||!r||!r._isEnabled||r._shouldOnlyDisplayOnMenu&&"menu"!==i.currentContentType)})).take(1).map((()=>{const{course:e,device:o}=t.getState(),i=e._videoIntro;if(i._useVideoStream)return c({_component:s.createElement(u,null),_shouldNotShowInNavigation:!0,_hasPriority:!0,_sortOrder:1,_class:"ev-video-intro-prompt",_dismiss:{text:i._closeButtonText}});if(i._shouldShowFullScreen&&"small"!==o.screenSize&&(!o.touch||o.isWindowsTouchScreen))return r({component:a,props:i});const n={_component:s.createElement(d,null),_shouldNotShowInNavigation:!0,_hasPriority:!0,_sortOrder:1,_class:"ev-video-intro-prompt",_dismiss:{text:i._closeButtonText}};return i._video&&(n._shouldWaitForDisplay=!0),c(n)}))},22240:(e,t,o)=>{const s=o(60019),{VIDEO_INTRO_METRICS:i}=o(75691),{RESTORE_EXTENSION:r}=o(59828),n={_metrics:null};e.exports=(e=n,t)=>{switch(t.type){case i:return s({},e,{_metrics:t.payload});case r:return"videoIntro"===t.payload.extensionName?s({},e,t.payload.extensionData):e;default:return e}}},83931:e=>{e.exports={_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},46397:(e,t,o)=>{const{registerEpics:s,registerReducer:i}=o(90876),{showVideoIntroEpic:r,registerTrackingMapEpic:n}=o(26307),l=o(22240);s(n,r),i("videoIntro",l)}}]);