"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9617],{4707:(e,t)=>{t.BOOKMARKING_COMPONENT_COMPLETED="BOOKMARKING_COMPONENT_COMPLETED",t.BOOKMARKING_NAVIGATE_TO_COMPONENT="BOOKMARKING_NAVIGATE_TO_COMPONENT",t.BOOKMARKING_CANCEL_CONTINUE="BOOKMARKING_CANCEL_CONTINUE",t.bookmarkingComponentCompleted=e=>({type:t.BOOKMARKING_COMPONENT_COMPLETED,payload:e})},84092:(e,t,o)=>{const{registerReducer:n,registerEpics:s}=o(90876),i=o(23879),{bookmarkingAddPromptEpic:r,bookmarkingComponentCompleteEpic:a,bookmarkingNavigateEpic:l,registerTrackingMapEpic:_}=o(43411);n("bookmarking",i),s(r,a,l,_)},43411:(e,t,o)=>{var n=o(28761);const{registerTrackingMap:s}=o(90876),{SETUP_APP:i,APP_READY:r}=o(63444),{COMPONENT_COMPLETED:a}=o(29933),{addPrompt:l,clearAllPrompts:_}=o(90672),p=o(57804),{BOOKMARKING_NAVIGATE_TO_COMPONENT:m,BOOKMARKING_CANCEL_CONTINUE:d,bookmarkingComponentCompleted:c}=o(4707),{SETUP_COURSE_ASSESSMENT_RETAKE:E}=o(36580),C=o(49622);t.bookmarkingAddPromptEpic=(e,t)=>e.filter((e=>{if(e.type!==r)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled&&o._lastCompletedComponentId})).take(1).map((()=>{const e=t.getState(),{bookmarking:o,course:n,courseAssessment:s={}}=e;let i;return i=o._isRetakeAssessmentNotificationEnabled&&s._isEnabled&&s._isComplete&&!s._isPassed&&n._courseAssessment._canBeRetaken&&(n._courseAssessment._allowUnlimitedRetakeAttempts||s.retakeAttemptsTaken<n._courseAssessment._retakeAttempts)?function({bookmarking:e,course:t,courseAssessment:o}){return{title:e._retakeAssessmentNotificationTitle,body:e._retakeAssessmentNotificationBody,_hasPriority:!0,_sortOrder:0,_action:{text:t._courseAssessment.retakeAssessmentNotifyConfirmButtonText,_type:E},_dismiss:{text:t._courseAssessment.retakeAssessmentNotifyCancelButtonText},_glyph:{_type:"progressCircle",_percentage:o.score}}}(e):function(e){return{title:e._notificationTitle,body:e._notificationBody,_hasPriority:!0,_sortOrder:0,_action:{text:e._notificationConfirm,_type:m},_dismiss:{text:e._notificationCancel,_type:d},_glyph:{_type:"icon",_icon:"bookmark"}}}(o),l(i)})),t.bookmarkingComponentCompleteEpic=(e,t)=>e.filter((e=>{if(e.type!==a)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled})).map((e=>c(e.payload.componentId))),t.bookmarkingNavigateEpic=(e,t)=>e.ofType(m).mergeMap((()=>{const{bookmarking:e,components:o}=t.getState(),s=o[e._lastCompletedComponentId];return s?(p(s),n.Observable.of(_())):n.Observable.empty()})),t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{if(e.type!==i)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled})).do((()=>{s("bookmarking",C,"extensions")})).ignoreElements()},23879:(e,t,o)=>{const{SETUP_APP:n,APP_READY:s}=o(63444),{RESTORE_EXTENSION:i}=o(59828),{BOOKMARKING_COMPONENT_COMPLETED:r}=o(4707),a={_isEnabled:!1,_lastCompletedComponentId:null};e.exports=(e=a,t)=>{if(t.type===n){const o=t.payload.course._bookmarking;return null!=o&&o._isEnabled?{...e,...o}:a}if(t.type===s&&e._isEnabled){const{scorm:n,_localStorage:s}=t.payload;let i=null;var o;if(null!=n&&n._isEnabled)i=null==n||null===(o=n.suspendData)||void 0===o?void 0:o._lastCompletedComponentId;else if(null!=s&&s._isEnabled){var l;i=null==s||null===(l=s.session)||void 0===l?void 0:l.lastCompletedComponentId}return i?{...e,_lastCompletedComponentId:i}:e}if(!e._isEnabled)return a;switch(t.type){case r:return{...e,_lastCompletedComponentId:t.payload};case i:return"bookmarking"===t.payload.extensionName?{...e,...t.payload.extensionData}:e;default:return e}}},49622:e=>{e.exports={_lastCompletedComponentId:{fieldKey:"_lastCompletedComponentId",type:"String",shouldRestore:!0}}}}]);