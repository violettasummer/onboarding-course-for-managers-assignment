"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7399],{98762:(e,s)=>{s.SAVE_USER_ANSWER="linkedOpenInput/SAVE_USER_ANSWER",s.saveUserAnswer=e=>({type:s.SAVE_USER_ANSWER,payload:e})},32591:(e,s,t)=>{var n=t(14859)(t(58527));const i=t(98923),r=t(16760),o=t(58335),{bool:a,func:p,object:l}=t(13980),d=t(2784),c=t(72779),{Component:u}=t(58720),m=t(23346),h=t(41119),_=t(27843),v=t(96235),g=t(88934),A=t(43855),k=t(60309),w=t(57852),b=t(11248),I=o({displayName:"LinkedOpenInput",propTypes:{component:l.isRequired,setComponentAsReady:p.isRequired,setComponentAsViewed:p.isRequired,setComponentAsComplete:p.isRequired,showFeedback:p.isRequired,saveUserAnswer:p.isRequired,setAriaLive:p.isRequired,isLinkedOpenInputsComplete:a,theme:l.isRequired,styles:l},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",showMessageModal:!1,modalMessage:null}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},saveUserAnswer(e){this.props.saveUserAnswer({componentId:this.props.component._id,userAnswer:e}),this.showSavedModal(),e&&i(this.showFeedback,200)},clearUserAnswer(){this.props.saveUserAnswer({componentId:this.props.component._id,userAnswer:""}),this.showClearedModal()},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const s={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(s)},showSavedModal(){this.props.component._saveSuccessMessage&&(this.setState({showMessageModal:!0,modalMessage:this.props.component._saveSuccessMessage}),i((()=>this.setState({showMessageModal:!1})),1e3))},showClearedModal(){const{component:e}=this.props;(e._clearSuccessMessage||e._saveSuccessMessage)&&(this.setState({showMessageModal:!0,modalMessage:e._clearSuccessMessage||e._saveSuccessMessage}),i((()=>this.setState({showMessageModal:!1})),1e3))},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){this.saveUserAnswer(this.state._userAnswer),this.props.setAriaLive({message:this.props.component.savedAriaLiveMessage,isAssertive:!0}),this.props.setComponentAsComplete(this.props.component._id,{_isSubmitted:!0})},onClearClicked(){this.setState({_userAnswer:""},this.clearUserAnswer),this.props.setAriaLive({message:this.props.component.clearedAriaLiveMessage,isAssertive:!1})},onVisibilityChange(...e){A(...e,this,this.props.setComponentAsViewed)},getLinkedUserAnswerStyle(){const{component:e,theme:s}=this.props,t={},n=e._linkedOpenInputAnswerBackgroundColor,i=e._linkedOpenInputAnswerTextColor;return n&&"transparent"!==n&&(t.backgroundColor=k(n,s._swatches)),i&&"transparent"!==i&&(t.color=k(i,s._swatches)),t},renderIncomplete(){if(!this.props.isLinkedOpenInputsComplete)return d.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete"},r(this.props.component._items,(e=>d.createElement(b,(0,n.default)({key:e._id},e)))))},renderOpenInputAnswers(){const{component:e}=this.props,s=this.getLinkedUserAnswerStyle();return r(e._items,(e=>d.createElement(w,(0,n.default)({key:e._id,style:s},e))))},renderTextArea(){if(!this.props.isLinkedOpenInputsComplete)return;const{component:e}=this.props,s=e._hasMinimumHeight?e._minimumHeight:300;return d.createElement(h,{ariaLabel:e.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.placeholder,minHeight:s})},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:s}=this.state;return""===s&&!e._userAnswer||s===e._userAnswer},renderButtons(){if(!this.props.isLinkedOpenInputsComplete)return;const{_isActionButtonOnRight:e}=_(this.props);return d.createElement("div",{className:c("ev-buttons",{"ev-switch-buttons":e})},d.createElement(m,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),d.createElement(m,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}))},renderMessageModal(){return d.createElement("div",{className:c("ev-linkedOpenInput-message-modal",{"ev-is-visible":this.state.showMessageModal})},this.state.modalMessage)},render(){const{props:e}=this;return d.createElement(u,{component:e.component,styles:e.styles,isVisibilitySensorActive:g(e),onVisibilityChange:this.onVisibilityChange},d.createElement("div",null,d.createElement("div",{className:v(e.component)},this.renderIncomplete(),this.renderOpenInputAnswers(),this.renderTextArea(),this.renderMessageModal()),this.renderButtons()))}});e.exports=I},57852:(e,s,t)=>{const n=t(2784),{connect:i}=t(57903),r=t(13980),o=t(58014),a=e=>e.isLinkedOpenInputComplete?n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-container"},n.createElement("div",{className:"ev-label"},e._linkedAnswerLabelText),n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer",style:e.style},n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-inner"},e.linkedOpenInputUserAnswer))):null;a.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,linkedOpenInputUserAnswer:r.string,_linkedAnswerLabelText:r.string,style:r.object},e.exports=i(((e,s)=>{const t=s._linkedOpenInputId?o(s._linkedOpenInputId):{};return{isLinkedOpenInputComplete:t._isComplete||!1,linkedOpenInputUserAnswer:t._userAnswer}}))(a)},11248:(e,s,t)=>{const n=t(2784),{connect:i}=t(57903),r=t(13980),o=t(36998),a=t(58014),p=t(23346),l=e=>e.isLinkedOpenInputComplete?null:n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message"},n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message-inner ev-label"},e._linkedIncompleteMessage),n.createElement(p,{className:"ev-linkedOpenInput-navigate-linked",text:e._navigateToLinkedButtonText,onClick:()=>o(e._linkedOpenInputId)}));l.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,_linkedOpenInputId:r.string,_navigateToLinkedButtonText:r.string,_linkedIncompleteMessage:r.string},e.exports=i(((e,s)=>({isLinkedOpenInputComplete:(s._linkedOpenInputId?a(s._linkedOpenInputId):{})._isComplete||!1})))(l)},67213:(e,s,t)=>{const{registerComponent:n}=t(90876),i=t(32591),r=t(59046),{saveUserAnswer:o}=t(98762);n("linkedOpenInput",{component:i,actions:{saveUserAnswer:o},reducer:r,mapStateToProps:t(61405),trackingMap:t(33140)})},61405:(e,s,t)=>{const n=t(92191),i=t(55281),r=t(57471),o=t(63867);e.exports=(e,s)=>{let t=s._isAlwaysEnabled;if(!t){const o=n(s._items).map((e=>e._linkedOpenInputId)).compact().value(),a=r(o,e);t=void 0===i(a,(e=>!0!==e._isComplete))}return{isLinkedOpenInputsComplete:t,articleStyle:o(e,s,"article")._classes}}},59046:(e,s,t)=>{const n=t(78871),{SAVE_USER_ANSWER:i}=t(98762);e.exports=(e,{type:s,payload:t})=>s===i?{...e,_userAnswer:t.userAnswer,_isCorrect:!0,_isSubmitted:!0,_correctAt:n()}:e},33140:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}},41119:(e,s,t)=>{const n=t(58335),i=t(13980),r=t(2784),o=t(72779),a=n({displayName:"TextArea",propTypes:{id:i.string,value:i.string.isRequired,label:i.string,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:s}=this.props;s&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return r.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:s=>e.onChange(s.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:o("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?r.createElement(r.Fragment,null,r.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},88934:e=>{e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},96235:(e,s,t)=>{const n=t(72779);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},43855:e=>{e.exports=function(e,s,t,n,i){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);