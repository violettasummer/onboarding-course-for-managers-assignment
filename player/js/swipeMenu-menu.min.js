"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1854],{7262:(e,t,s)=>{const n=s(58335),i=s(13980),o=s(2784),r=s(28316),a=n({displayName:"Swipeable",propTypes:{onSwipe:i.func.isRequired,threshold:i.number,allowedTime:i.number,restraint:i.number},getDefaultProps:function(){return{threshold:30,allowedTime:400,restraint:100}},getInitialState:function(){return{_startX:0,_startY:0,_startTime:0}},onTouchStart:function(e){const t=e.changedTouches[0];this.setState({_startX:t.pageX,_startY:t.pageY,_startTime:(new Date).getTime()}),e.target===r.findDOMNode(this)&&e.preventDefault()},onTouchMove:function(){},onTouchEnd:function(e){const t=e.changedTouches[0],s=t.pageX-this.state._startX,n=t.pageY-this.state._startY,i=(new Date).getTime()-this.state._startTime;let o="none";i<=this.props.allowedTime&&(Math.abs(s)>=this.props.threshold&&Math.abs(n)<=this.props.restraint?o=s<0?"left":"right":Math.abs(n)>=this.props.threshold&&Math.abs(s)<=this.props.restraint&&(o=n<0?"up":"down"));const a={direction:o,speed:{x:s/i,y:n/i},distance:{x:s,y:n},timeTaken:i};this.props.onSwipe(a),this.setState({_startX:0,_startY:0,_startTime:0}),e.target===r.findDOMNode(this)&&e.preventDefault()},render:function(){return o.createElement("div",{className:"ev-swipeable",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},this.props.children)}});e.exports=a},19017:e=>{e.exports=function(e){var t;const s=e.displayTitle,n=null!==(t=e._heroImage)&&void 0!==t&&t._isEnabled?e._heroImage.title:null;return s||n}},8846:(e,t,s)=>{const n=s(72579),{Observable:i}=s(28761),{setLocationReadyState:o,PUSH_LOCATION:r}=s(63444),a=s(36151),l=s(69610);e.exports=e=>(t,s)=>t.filter((({type:t})=>{if(t!==r)return;const{location:n,settings:i}=s.getState();return"menu"===n.currentContentType&&i._menu===e})).switchMap((()=>{const t=s.getState(),{location:r,contentObjects:u,device:h,course:c}=t,{currentId:m}=r,d=m===c._id?c:u[m],p=n(d,[`_${e}`,"_heroImage"]);if(!p||!p._graphic)return i.empty();const v=a(p._graphic.src,p._graphic.srcAdvanced,!0);return v?i.concat(i.of(o(!1)),i.bindCallback(l)(v,!1).map((()=>o(!0)))):i.empty()}))},73917:(e,t,s)=>{const n=s(72579),i=s(16760),o=s(58335),{array:r,bool:a,object:l}=s(13980),u=s(2784),h=s(7262),c=s(72779),{Menu:m}=s(20077),d=s(83500),p=o({displayName:"SwipeMenu",propTypes:{menu:l.isRequired,device:l.isRequired,theme:l.isRequired,itemIds:r.isRequired,location:l.isRequired,hasActionBar:a.isRequired,course:l},getInitialState:()=>({currentIndex:0}),UNSAFE_componentWillReceiveProps({device:e}){const{props:t}=this;t.device.orientation!==e.orientation&&this.setState({currentIndex:0})},getMenuItemsContainerClass(){const{menu:e,device:t}=this.props;let s=e._swipeMenu._shouldShowControlsOnHover;const n=e._swipeMenu._shouldShowControlsOnBottom,i=e._swipeMenu._shouldPartiallyShowNextItem,o=e._swipeMenu._shouldDisableItemScaling;return(t.touch&&!t.isWindowsTouchScreen||n)&&(s=!1),c("ev-menu-items-container ev-clearfix",{"ev-show-controls-on-hover":s,"ev-show-controls-bottom":n,"ev-partially-show-next-item":i,"ev-should-disable-item-scaling":o})},getMenuItemsStyle(){let e="auto";const t=this.props.menu._swipeMenu;return t._shouldShowControlsOnBottom?e="auto":!t._shouldShowControlsOnBottom&&t._shouldShowControlsOnHover?e=this.props.device.touch&&!this.props.device.isWindowsTouchScreen?"0 34px":"auto":t._shouldShowControlsOnBottom||t._shouldShowControlsOnHover||(e="0 34px"),{margin:e,overflow:this.props.menu._swipeMenu._shouldAlwaysShowItems?"visible":"hidden"}},getMenuItemsInnerStyle(e){const{device:t,menu:s}=this.props,{currentIndex:n}=this.state,i=this.getItemsVisible(),{_shouldPartiallyShowNextItem:o,_shouldShowControlsOnHover:r,_shouldShowControlsOnBottom:a}=s._swipeMenu;let l=100/i*n;if(o&&(!r||!a))switch(t.screenSize){case"medium":l=46*n;break;case"small":l=90*n;break;default:l=31*n}return{transform:`translate3d(${e?`${l}%`:`-${l}%`}, 0, 0)`}},getItemsVisible(){const{device:e,itemIds:t}=this.props,s=t.length;let n;switch(e.screenSize){case"medium":n=2;break;case"small":n=1;break;default:n=3}return s<n?s:n},showItemContent(e){this.setState({_itemSelectedId:e})},onLeftClicked(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex-1,_itemSelectedId:null})},onRightClicked(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex+1,_itemSelectedId:null})},onMenuItemsSwipe(e){"left"!==e.direction?"right"===e.direction&&this.onSwipeRight():this.onSwipeLeft()},onSwipeLeft(){this.state.currentIndex<this.props.itemIds.length-this.getItemsVisible()&&this.setState({currentIndex:this.state.currentIndex+1})},onSwipeRight(){this.state.currentIndex>0&&this.setState({currentIndex:this.state.currentIndex-1})},renderLeftControl(e){const t=0===this.state.currentIndex;if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const s=c("ev-menu-controls",{"ev-menu-controls-left":!e,"ev-menu-controls-right":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),n=c("ev-button ev-primary ev-menu-control ev-menu-control-left",{"ev-is-active":!t});return u.createElement("div",{className:s},u.createElement("button",{className:n,onClick:this.onLeftClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.prevButtonAriaLabel},u.createElement("i",{className:c("ev-icon",{"ev-icon-arrow-left":!e,"ev-icon-arrow-right":e})})))},renderRightControl(e){const t=this.state.currentIndex===this.props.itemIds.length-this.getItemsVisible();if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const s=c("ev-menu-controls",{"ev-menu-controls-right":!e,"ev-menu-controls-left":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),n=c("ev-button ev-primary ev-menu-control ev-menu-control-right",{"ev-is-active":!t,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom});return u.createElement("div",{className:s},u.createElement("button",{className:n,onClick:this.onRightClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.nextButtonAriaLabel},u.createElement("i",{className:c("ev-icon",{"ev-icon-arrow-right":!e,"ev-icon-arrow-left":e})})))},getShouldShowProgressBars(){const{props:e}=this,t=n(e.theme,"_menu._settings._shouldShowProgressBarsOnMenus","content"),s=n(e.menu,"_swipeMenu._shouldShowProgressBarsOnMenus",!0);return"content"===t?s:"true"===t},renderItems(){var e;const{props:t}=this,s=n(t.menu,"_swipeMenu._shouldShowIconOnMenuItems",!1),o=n(t.theme,"_menu._settings._durationIcon",null),r=null===(e=t.course._swipeMenu)||void 0===e?void 0:e._shouldDisableDetailOnHover,a=this.getShouldShowProgressBars();return i(t.itemIds,((e,n)=>{const i=n>=this.state.currentIndex&&n<this.state.currentIndex+this.getItemsVisible(),l=e===this.state._itemSelectedId;return u.createElement(d,{key:e,itemId:e,showItemContent:this.showItemContent,isContentVisible:l,isVisibleItem:i,shouldShowProgressBarsOnMenus:a,shouldShowIconOnMenuItems:s,shouldAlwaysShowContent:r,shouldAlwaysShowItems:t.menu._swipeMenu._shouldAlwaysShowItems,durationIcon:o})}))},render(){const{props:e}=this,t=n(e.course,"_isRTL",!1);return u.createElement(m,{className:"ev-swipe-menu",menu:e.menu,menuSettings:e.menu._swipeMenu,device:e.device,theme:e.theme,location:e.location,hasActionBar:e.hasActionBar},u.createElement("div",{className:this.getMenuItemsContainerClass()},this.renderLeftControl(t),u.createElement(h,{onSwipe:this.onMenuItemsSwipe},u.createElement("div",{className:"ev-menu-items",ref:"menuItems",style:this.getMenuItemsStyle()},u.createElement("div",{className:"ev-menu-items-inner",style:this.getMenuItemsInnerStyle(t)},this.renderItems()))),this.renderRightControl(t)))}});e.exports=p},83500:(e,t,s)=>{const n=s(58335),i=s(2784),o=s(72779),r=s(19017),a=s(14755),l=s(96075),u=s(36151),h=s(57992),c=s(11533),m=s(11865),{MenuItemProgress:d,MenuItemDuration:p,MenuItemHOC:v,MenuItemLink:w}=s(20077),I=s(26558),g=n({displayName:"SwipeMenuItem",showItemContent(){this.props.showItemContent(this.props.item._id)},onLinkPressed(e){e.stopPropagation()},getStyle(){var e,t;const{width:s,height:n,item:i,isContentVisible:o}=this.props,r={width:`${s}px`,height:`${n}px`},a=null===(e=i._swipeMenu)||void 0===e?void 0:e._graphic,h=null===(t=i._swipeMenu)||void 0===t?void 0:t._hoverGraphic;return l(a)&&(r.backgroundImage=`url(${u(a.src,a.srcAdvanced,!0)})`),o&&l(h)&&(r.backgroundImage=`url(${u(h.src,h.srcAdvanced,!0)})`),r},getItemClass(){const{props:e}=this;return o(`ev-menu-item ev-collection-item ev-menu-item-${e.item._id}`,{"ev-is-visible-item":!!e.shouldAlwaysShowItems||e.isVisibleItem,"ev-is-content-visible":e.isContentVisible,"ev-static-content":e.shouldAlwaysShowContent})},renderTitle(){const e=r(this.props.item);if(e)return i.createElement(c,{id:`${this.props.item._id}-title`,headingElement:"h2",displayTitle:e,className:"ev-menu-item-title",innerClassName:"ev-menu-item-title-inner"})},renderBody(){if(this.props.item.description)return i.createElement(m,{id:`${this.props.item._id}-description`,body:this.props.item.description,className:"ev-menu-item-body",innerClassName:"ev-menu-item-body-inner"})},renderDuration(){if(this.props.item.duration)return i.createElement(p,{duration:this.props.item.duration,durationIcon:this.props.durationIcon,durationLabel:this.props.item.durationLabel})},renderProgress(){const{props:e}=this;if(e.shouldShowProgressBarsOnMenus)return i.createElement(d,{item:e.item,pageMenuItemsCompletedCount:e.pageMenuItemsCompletedCount,pageMenuItemsCount:e.pageMenuItemsCount,completedChildrenAsPercentage:e.completedChildrenAsPercentage})},renderLink(){const{item:e}=this.props;return i.createElement(w,{id:e._id,isLocked:e._isLocked,isVisited:e._isVisited,linkText:e.linkText,linkIcon:e.linkIcon,isLinkIconRightPosition:e.isLinkIconRightPosition,link:`/${e._type}/${e._id}`,onClick:this.onLinkPressed,onTouchMove:this.onLinkPressed,onTouchStart:this.onLinkPressed,onTouchEnd:this.onLinkPressed})},renderElements(e){return h("menuItem",e,{item:this.props.item})},render(){return i.createElement(I,{id:this.props.item._id,name:"menu item",className:this.getItemClass(),style:this.getStyle(),onMouseOver:this.showItemContent,onMouseOut:this.showItemContent,onTouchStart:this.showItemContent},this.renderElements("root"),a(this.props.item,"menuitem"),i.createElement("div",{className:"ev-menu-item-inner ev-collection-item-inner"},i.createElement("div",{className:"ev-collection-item-content"},i.createElement("div",{className:"ev-collection-item-content-inner ev-clearfix"},this.renderTitle(),i.createElement("div",{className:"ev-menu-item-hidden-content"},this.renderBody(),this.renderDuration(),this.renderElements("content"),this.renderProgress(),this.renderLink())))))}});e.exports=v(g)},10360:(e,t,s)=>{const{registerMenu:n,registerEpics:i}=s(90876),o=s(8846),r=s(73917);i(o("swipeMenu")),n("swipeMenu",r)}}]);