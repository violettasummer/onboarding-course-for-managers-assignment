(self.webpackChunk=self.webpackChunk||[]).push([[8701],{49560:(e,s,t)=>{"use strict";const n=t(58335),{bool:o,number:r,object:a,string:i}=t(13980),c=t(2784),l=t(28316),{connect:m}=t(57903),u=t(60309),p=t(21476),d=n({displayName:"CourseAssessmentProgressCircle",propTypes:{variables:a.isRequired,componentsCount:r.isRequired,completedComponentsCount:r.isRequired,swatches:a,text:i.isRequired,ariaHidden:o},getDefaultProps:()=>({ariaHidden:!1,completedComponentsCount:0}),componentDidMount(){const e=l.findDOMNode(this),{variables:s,componentsCount:t,completedComponentsCount:n,swatches:o,text:r}=this.props,a=u(s["@chart-background-color"],o),i=u(s["@chart-highlight-color"],o),c=u(s["@chart-text-color"],o);p(e,80,80,n,t,r,18,38,38,4,4,a,i,c)},render(){return c.createElement("div",{className:"ev-course-assessment-results-stats-progress-canvas","aria-hidden":this.props.ariaHidden})}});e.exports=m((({theme:e})=>({variables:e._chart._variables,swatches:e._swatches})))(d)},57005:(e,s,t)=>{"use strict";var n=t(14859)(t(58527));const o=t(829),r=t(98346),a=t(58335),{bool:i,func:c,object:l}=t(13980),m=t(2784),{ContentContainer:u,HeroImage:p}=t(20077),d=t(46392),v=t(36998),_=t(615),h=t(86587),C=t(23346),A=t(11865),E=t(72489),b=t(47169),k=t(46666),S=t(10772),N=t(448),g=a({displayName:"CourseAssessmentResults",propTypes:{components:l.isRequired,courseAssessment:l.isRequired,showConfirmResetDialog:c.isRequired,theme:l.isRequired,course:l.isRequired,isReady:i.isRequired,addPrompt:c.isRequired},getInitialState:()=>({_selectedComponentId:null}),onViewBreakDown(e){this.setState({_selectedComponentId:e._id})},onViewComponent(e){v(e._refId)},onShowFeedback(e){const{course:s,addPrompt:t}=this.props;t(d(e,e._userFeedback,s))},onCloseCourse(e){e.preventDefault(),window._exitCourse()},onRetakeAssessment(){this.props.showConfirmResetDialog()},getCompletedComponentsCount(){const{completedComponentsCount:e}=this.props.courseAssessment;return e||0},renderNoResults(){const{courseAssessment:e}=this.props;if(!this.getCompletedComponentsCount()&&e.noResultsText)return m.createElement(E,null,m.createElement(A,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:e.noResultsText}))},renderOverview(){if(this.getCompletedComponentsCount())return m.createElement(k,(0,n.default)({},this.props.courseAssessment,{components:this.props.components}))},renderBreakdown(){const{props:e}=this;if(!e.courseAssessment._shouldHideBreakdown)return this.getCompletedComponentsCount()?m.createElement(S,{components:e.courseAssessment._showBreakdownInCompletionOrder?o(e.components,"_completedAt"):r(e.components),selectedComponentId:this.state._selectedComponentId,courseAssessment:e.courseAssessment,onViewBreakDown:this.onViewBreakDown,onViewComponent:this.onViewComponent,onShowFeedback:this.onShowFeedback}):void 0},renderRetake(){const{courseAssessment:e}=this.props;if(e._isComplete&&e._canBeRetaken)return m.createElement(N,{courseAssessment:e,onRetakeAssessment:this.onRetakeAssessment})},renderCloseCourseButton(){const{courseAssessment:e}=this.props;if(e._isComplete&&e._hasCloseCourseButton)return m.createElement("div",{className:"ev-course-assessment-results-overview-close ev-content ev-extension-content"},m.createElement("div",{className:"ev-course-assessment-results-overview-close-inner ev-content-inner"},m.createElement(C,{className:"ev-course-assessment-results-overview-close-button",icon:"cross",iconPosition:"right",onClick:this.onCloseCourse,text:e._closeCourseButtonText})))},renderHeroImage(){const{_heroImage:e}=this.props.courseAssessment;if(null!=e&&e._isEnabled)return m.createElement(h.Provider,{value:this.props.courseAssessment.title?this.context+1:this.context},m.createElement(p,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e,s;const{courseAssessment:t,isReady:o,theme:r}=this.props,a=t.title||null!==(e=t._heroImage)&&void 0!==e&&e._isEnabled&&null!==(s=t._heroImage)&&void 0!==s&&s.title?this.context+1:this.context;return m.createElement(u,{region:"course assessment",className:"ev-course-assessment-results ev-extension",ariaLabel:t.ariaLabel},m.createElement("div",{className:"ev-extension-inner"},o?null:m.createElement(_,null),m.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),m.createElement(b,(0,n.default)({},t,{theme:r})),m.createElement(h.Provider,{value:a},this.renderNoResults(),this.renderOverview(),this.renderBreakdown(),this.renderRetake(),this.renderCloseCourseButton())))}});g.contextType=h,e.exports=g},10772:(e,s,t)=>{"use strict";const n=t(16760),{array:o,func:r,object:a,string:i}=t(13980),c=t(2784),l=t(72489),m=t(11533),u=t(86587),p=t(61559),d=e=>{const s=c.useContext(u);return c.createElement(l,{className:"ev-course-assessment-results-breakdown"},c.createElement(m,{headingElement:`h${s}`,displayTitle:e.courseAssessment.resultsBreakdownTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),c.createElement("ul",{className:"ev-course-assessment-results-breakdown-items ev-list-items",role:"tablist"},c.createElement(u.Provider,{value:s+1},n(e.components,((s,t)=>c.createElement(p,{key:s._id,index:t,component:s,isSelected:e.selectedComponentId===s._id,onViewBreakDown:e.onViewBreakDown,onShowFeedback:e.onShowFeedback,onViewComponent:e.onViewComponent,courseAssessment:e.courseAssessment}))))))};d.propTypes={components:o.isRequired,courseAssessment:a.isRequired,onViewBreakDown:r.isRequired,onShowFeedback:r.isRequired,onViewComponent:r.isRequired,selectedComponentId:i},e.exports=d},61559:(e,s,t)=>{"use strict";const{bool:n,func:o,number:r,object:a}=t(13980),i=t(2784),c=t(72779),l=t(23346),m=t(11533),u=t(50085),p=t(10817),d=t(86587),v=e=>{const s=i.useContext(d),t=()=>{const{_attempts:s,_attemptsLeft:t}=e.component;return`${s-t}/${s}`};return i.createElement("li",{className:"ev-course-assessment-breakdown-item ev-list-item"},i.createElement("div",{className:"ev-course-assessment-breakdown-item-inner ev-list-item-inner"},i.createElement("div",{className:"ev-list-item-left"},i.createElement(m,{headingElement:`h${s}`,displayTitle:e.component.displayTitle||e.index+1,className:"ev-course-assessment-breakdown-item-title",innerClassName:"ev-course-assessment-breakdown-item-title-inner ev-list-item-title"}),i.createElement("div",{className:"ev-course-assessment-breakdown-item-completed-text"},i.createElement(p,{className:"ev-course-assessment-breakdown-item-completed-text-inner",html:(()=>{const{component:s,courseAssessment:t}=e;return s._isComplete?t.resultsBreakdownQuestionsCompletedText:t.resultsComponentNotCompleteText})()}))),i.createElement("div",{className:"ev-list-item-right"},i.createElement(l,{className:"ev-course-assessment-breakdown-item-details-button","aria-controls":`${e.component._id}-breakdown`,"aria-expanded":e.isSelected,isDisabled:!0!==e.component._isComplete,text:e.courseAssessment.resultsViewDetailedBreakdownText,onClick:()=>e.onViewBreakDown(e.component)}),i.createElement(l,{className:"ev-course-assessment-breakdown-item-view-button",text:e.courseAssessment.resultsViewComponentText,onClick:()=>e.onViewComponent(e.component)}))),i.createElement("div",{id:`${e.component._id}-breakdown`,className:c("ev-course-assessment-breakdown-item-advanced ev-list-item-content",{"ev-display-none":!e.isSelected})},i.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-inner ev-list-item-content-inner"},e.component.body?i.createElement(p,{className:"ev-course-assessment-breakdown-item-advanced-body",html:e.component.body}):null,i.createElement("div",{className:"ev-course-assessment-breakdown-item-details ev-clearfix"},i.createElement("div",{className:"ev-info-detail ev-course-assessment-breakdown-item-details-col"},i.createElement(u,{className:"ev-info-detail-display",icon:e.component._isCorrect?"check":"cross"}),i.createElement(p,{className:"ev-info-detail-label",html:(()=>{const{component:s,courseAssessment:t}=e;return s._isCorrect?t.resultsViewDetailedBreakdownCorrectText:t.resultsViewDetailedBreakdownIncorrectText})()})),i.createElement("div",{className:"ev-info-detail ev-course-assessment-breakdown-item-details-col"},i.createElement("div",{className:"ev-info-detail-display","aria-hidden":!0},t()),i.createElement(p,{className:"ev-info-detail-label",html:`${e.courseAssessment.resultsBreakdownAttemptsTakenText} <span class="ev-visually-hidden">${t()}</span>`}))),(()=>{const{_canShowFeedback:s=!0,_userFeedback:t}=e.component;if(s&&t)return i.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-feedback"},i.createElement(l,{className:"ev-course-assessment-breakdown-item-advanced-feedback-button",text:e.courseAssessment.resultsBreakdownFeedbackButton,onClick:()=>e.onShowFeedback(e.component)}))})())))};v.propTypes={component:a.isRequired,courseAssessment:a.isRequired,index:r.isRequired,isSelected:n.isRequired,onViewBreakDown:o.isRequired,onShowFeedback:o.isRequired,onViewComponent:o.isRequired},e.exports=v},42602:(e,s,t)=>{"use strict";var n=t(14859)(t(58527));const o=t(13980),r=t(2784),a=t(11865),i=t(10817),c=t(86587),l=t(46666),m=t(448),u=e=>r.createElement("div",{className:"ev-course-assessment-results-dialog","aria-label":e.courseAssessment.ariaLabel},r.createElement(c.Provider,{value:2},(()=>{const{courseAssessment:s,titleTextAlignment:t}=e;if(s.completionNotifyTitle)return r.createElement(i,{element:"h2",id:"ev-prompt-title",className:"ev-prompt-title ev-focusable",style:{textAlign:t},html:s.completionNotifyTitle,tabIndex:"-1"})})(),(()=>{const{courseAssessment:s,bodyTextAlignment:t}=e;if(s.completionNotifyBody)return r.createElement(a,{id:"ev-prompt-body",className:"ev-prompt-body",style:{textAlign:t},body:s.completionNotifyBody,tabIndex:"-1"})})(),r.createElement(l,(0,n.default)({},e.courseAssessment,{components:e.components})),(()=>{if(e.courseAssessment._canBeRetaken)return r.createElement(m,{courseAssessment:e.courseAssessment,hideRetakeButton:!0})})()));u.propTypes={courseAssessment:o.object.isRequired,components:o.object.isRequired,titleTextAlignment:o.string,bodyTextAlignment:o.string},e.exports=r.memo(u)},47169:(e,s,t)=>{"use strict";const n=t(2784),o=t(72779),r=t(11865),a=t(11533),i=t(86587);e.exports=({title:e,body:s,_headerIcon:t,theme:c})=>{var l,m;const u=null===(l=c._extensions._courseAssessment)||void 0===l||null===(m=l._settings)||void 0===m?void 0:m._headerIcon,p=t||u,d=n.useContext(i);return n.createElement("div",{className:"ev-course-assessment-item-header ev-header"},n.createElement("div",{className:o("ev-course-assessment-item-inner ev-header-inner ev-clearfix",{"ev-no-graphic":!p})},n.createElement("div",{className:"ev-courseAssessment-item-left ev-header-left"},n.createElement(a,{headingElement:`h${d}`,displayTitle:e,className:"ev-header-title",innerClassName:"ev-header-title-inner"}),n.createElement(r,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:s})),p&&n.createElement("div",{className:"ev-course-assessment-item-right ev-header-right"},n.createElement("i",{className:`ev-icon ev-icon-${p}`}))))}},46666:(e,s,t)=>{"use strict";const n=t(72579),o=t(79421),r=t(19574),a=t(90882),i=t(36402),c=t(58335),l=t(2784),{bool:m,object:u,number:p,string:d}=t(13980),{connect:v}=t(57903),_=t(11865),h=t(11533),C=t(50085),A=t(10817),E=t(86587),b=t(72489),k=t(49560),S=c({displayName:"CourseAssessmentResultsOverview",propTypes:{components:u.isRequired,completedComponentsCount:p,isComponentOverview:m,isFullScreenOpen:m,_isComplete:m,_isPassed:m,_showScoreAsPercentage:m,_showQuestionsCompleted:m,_showQuestionsCorrect:m,_showAttemptsTaken:m,incompleteFeedback:d,scoreText:d.isRequired,score:p.isRequired,resultsOverviewTitle:d.isRequired,progressDescription:d.isRequired,resultsQuestionsCorrect:d.isRequired,resultsViewAverageAttemptsTakenText:d.isRequired},getDefaultProps:()=>({_showScoreAsPercentage:!0,_showQuestionsCompleted:!0,_showQuestionsCorrect:!0,_showAttemptsTaken:!0}),getFeedback(){const{props:e}=this;return e._isComplete?n(e,["_feedback",e._isPassed?"passed":"failed"]):e.incompleteFeedback},getAverageAttempts(){const{props:e}=this;let s=0;return o(e.components,(e=>{if(!e._isComplete)return;const{_attempts:t,_attemptsLeft:n}=e,o=t-n;s+=r(o)?o:1})),Math.round(s/e.completedComponentsCount*100)/100||"0"},getCorrectComponentsCount(){return a(this.props.components,{_isComplete:!0,_isCorrect:!0}).length},renderScore(e){if(!this.props._isComplete)return;const{score:s,_showScoreAsPercentage:t,scoreText:n,_isPassed:o}=this.props,r=s+(t?"%":""),a=l.createElement(C,{className:"ev-info-detail-display",icon:o?"check":"cross"}),i=l.createElement(A,{element:"span",html:`${n} <b>${r}</b>`});return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},a),l.createElement("div",{className:"ev-label"},i))):l.createElement("div",{className:"ev-info-detail"},a,l.createElement("div",{className:"ev-info-detail-label"},i))},renderResultsDetail(e){const{_showQuestionsCompleted:s,_showQuestionsCorrect:t,_showAttemptsTaken:n}=this.props;if(s||t||n)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},this.renderQuestionsCompleted(!0),this.renderQuestionsCorrect(!0),this.renderAttempts(!0)):l.createElement("div",{className:"ev-content-row ev-course-assessment-results-roundup"},l.createElement("div",{className:"ev-content-row-inner ev-clearfix"},this.renderQuestionsCompleted(),this.renderQuestionsCorrect(),this.renderAttempts()))},renderQuestionsCompleted(e){const{props:s}=this;if(!s._showQuestionsCompleted)return;const t=i(s.components),n=`${Math.round(s.completedComponentsCount/t*100)}%`;return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement(k,{key:s.completedComponentsCount,text:n,ariaHidden:!0,componentsCount:t,completedComponentsCount:s.completedComponentsCount}),l.createElement(A,{className:"ev-label",html:`${s.progressDescription} <span class="ev-visually-hidden">${n}</span>`})):l.createElement("div",{className:"ev-course-assessment-results-progress ev-course-assessment-results-roundup-col"},l.createElement(k,{key:s.isFullScreenOpen,text:n,ariaHidden:!0,componentsCount:t,completedComponentsCount:s.completedComponentsCount}),l.createElement(A,{className:"ev-course-assessment-results-progress-text ev-info-graph-label",html:`${s.progressDescription} <span class="ev-visually-hidden">${n}</span>`}))},renderQuestionsCorrect(e){const{_showQuestionsCorrect:s,components:t,resultsQuestionsCorrect:n}=this.props;if(!s)return;const o=`${this.getCorrectComponentsCount()} / ${i(t)}`;return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:"ev-info-detail-display","aria-hidden":!0},o)),l.createElement(A,{className:"ev-label",html:`${n} <span class="ev-visually-hidden">${o}</span>`})):l.createElement("div",{className:"ev-course-assessment-results-questions ev-course-assessment-results-roundup-col"},l.createElement("div",{className:"ev-course-assessment-results-questions-inner ev-info-detail"},l.createElement("div",{className:"ev-course-assessment-results-question-result ev-info-detail-display","aria-hidden":!0},o),l.createElement(A,{className:"ev-course-assessment-results-question-text ev-info-detail-label",html:`${n} <span class="ev-visually-hidden">${o}</span>`})))},renderAttempts(e){const{_showAttemptsTaken:s,resultsViewAverageAttemptsTakenText:t}=this.props;if(!s)return;const n=this.getAverageAttempts();return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:"ev-info-detail-display","aria-hidden":!0},n)),l.createElement(A,{className:"ev-label",html:`${t} <span class="ev-visually-hidden">${n}</span>`})):l.createElement("div",{className:"ev-course-assessment-results-attempts ev-course-assessment-results-roundup-col"},l.createElement("div",{className:"ev-course-assessment-results-attempts-inner ev-info-detail"},l.createElement("div",{className:"ev-course-assessment-results-attempts-result ev-info-detail-display","aria-hidden":!0},n),l.createElement(A,{className:"ev-course-assessment-results-attempts-text ev-info-detail-label",html:`${t} <span class="ev-visually-hidden">${n}</span>`})))},renderComponentOverview(){const{props:e}=this;return l.createElement("div",{className:"ev-course-assessment-results-component-overview"},l.createElement(h,{headingElement:`h${this.context+1}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),this.renderScore(!0),l.createElement(_,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:this.getFeedback()}),this.renderResultsDetail(!0))},render(){const{props:e}=this;return e.isComponentOverview?this.renderComponentOverview():l.createElement(b,{className:"ev-course-assessment-results-overview"},l.createElement(h,{headingElement:`h${this.context}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),l.createElement("div",{className:"ev-content-row"},l.createElement("div",{className:"ev-content-row-inner"},this.renderScore(),l.createElement(_,{className:"ev-course-assessment-results-overview-status-feedback  ev-content-body",innerClassName:"ev-course-assessment-results-overview-status-feedback-inner ev-content-body-inner",body:this.getFeedback()}))),this.renderResultsDetail())}});S.contextType=E,e.exports=v((({fullScreen:e})=>({isFullScreenOpen:e.isOpen})))(S)},448:(e,s,t)=>{"use strict";const n=t(2784),o=t(13980),r=t(23346),a=t(11533),i=t(86587),c=t(72489),l=e=>{const s=n.useContext(i),t=s=>{s.preventDefault(),e.onRetakeAssessment()},o=()=>{const{retakeAttemptsPrefixText:s,retakeAttemptsTaken:t,_retakeAttempts:n,_allowUnlimitedRetakeAttempts:o}=e.courseAssessment;return o?`${s}: ${t}`:`${s}: ${t}/${n}`},l=()=>{const{retakeAttemptsTaken:s,_retakeAttempts:o,retakeAssessmentButtonText:a,_allowUnlimitedRetakeAttempts:i,_shouldHideRetakeOnAssessmentPassed:c,_isPassed:l}=e.courseAssessment;if(!(e.hideRetakeButton||c&&l)&&(s!==o||i))return n.createElement("div",{className:"ev-course-assessment-results-overview-reset"},n.createElement("div",{className:"ev-course-assessment-results-overview-reset-inner"},n.createElement(r,{onClick:t,variant:"warning",text:a})))};return e.isComponentRetake?n.createElement("div",{className:"ev-course-assessment-results-component-overview-retake"},n.createElement("div",{className:"ev-label"},o()),l()):n.createElement(c,null,n.createElement(a,{headingElement:`h${s}`,displayTitle:o(),className:"ev-component-title",innerClassName:"ev-component-title-inner"}),l())};l.propTypes={courseAssessment:o.object.isRequired,onRetakeAssessment:o.func,hideRetakeButton:o.bool,isComponentRetake:o.bool},e.exports=n.memo(l)},1976:(e,s,t)=>{"use strict";const n=t(72579),o=t(2784),r=t(50085);e.exports=({item:e,status:s})=>{var t;if("page"!==e._type||null===(t=e._courseAssessment)||void 0===t||!t._isAssessmentPage||!n(e._courseAssessment,["_assessmentStatusLabel",s,"label"]))return null;const{label:a,icon:i}=e._courseAssessment._assessmentStatusLabel[s];return o.createElement("div",{className:"ev-course-assessment-status-label ev-menu-item-completion"},o.createElement("div",{className:"ev-course-assessment-status-label-inner ev-menu-item-completion-inner"},i&&o.createElement(r,{className:"ev-menu-item-completion-icon",icon:i}),o.createElement("span",null,a)))}},57587:(e,s,t)=>{"use strict";const n=t(2784),{connect:o}=t(57903),{addPrompt:r}=t(90672),{showConfirmResetDialog:a}=t(36580),{courseAssessmentSelector:i,courseAssessmentComponentsSelector:c}=t(34956),l=t(57005);e.exports=o((e=>({theme:e.theme,course:e.course,courseAssessment:i(e),components:c(e),isReady:e.location.isLocationReady})),{showConfirmResetDialog:a,addPrompt:r})((e=>n.createElement(l,e)))},56219:(e,s,t)=>{"use strict";const n=t(2784),{connect:o}=t(57903),{courseAssessmentSelector:r,courseAssessmentComponentsSelector:a}=t(34956),i=t(42602);e.exports=o((e=>({courseAssessment:r(e),components:a(e)})))((e=>n.createElement(i,e)))},50869:(e,s,t)=>{"use strict";const{connect:n}=t(57903),{courseAssessmentStatusSelector:o}=t(34956),r=t(1976);e.exports=n((e=>({status:o(e)})))(r)},66656:(e,s,t)=>{"use strict";const{registerEpics:n,registerReducer:o}=t(90876),r=t(6443),a=t(64147),{registerElementsEpic:i,registerAssessmentComponentFeedbackEpic:c,registerTrackingMapEpic:l,evaluateAssessmentOnComponentCompletedEpic:m,courseAssessmentCompleteEpic:u,showAssessmentCompletedPromptEpic:p,confirmResetAssessmentDialogEpic:d,setupRetakeAssessmentEpic:v,setVariableOnScoreChangedEpic:_,setVariableOnAssessmentCompletedEpic:h}=t(56074);n(i,c,l,m,u,p,d,v,_,h,r("courseAssessment")),o("courseAssessment",a)},21476:(e,s,t)=>{"use strict";const n=t(20340);e.exports=function(e,s,t,o,r,a,i,c,l,m,u,p,d,v){const _=n(e,s,t);_.customAttributes.arc=function(e,s,t,n,o){const r=360/n*t,a=(90-r)*Math.PI/180,i=e+o*Math.cos(a),c=s-o*Math.sin(a);return{path:n===t?[["M",e,s-o],["A",o,o,0,1,1,e-.01,s-o]]:[["M",e,s-o],["A",o,o,0,+(r>180),1,i,c]]}},_.text(s/2,t/2,a).attr({"font-size":i,fill:v,"font-weight":"bold"}),_.circle(s/2,t/2,l).attr({stroke:p,"stroke-width":u}),_.path().attr({stroke:d,"stroke-width":m,arc:[s/2,t/2,0,r,c]}).rotate(0,0,0).animate({arc:[s/2,t/2,o,r,c]},1900)}},56074:(e,s,t)=>{"use strict";const n=t(72579),o=t(58215),r=t(90882),a=t(85395),i=t(17620),c=t(60019),l=t(92191),m=t(98874),{Observable:u}=t(28761),p=t(2784),d=t(45630),{asap:v}=t(1127),{SETUP_APP:_}=t(63444),{COMPONENT_COMPLETED:h,COMPONENTS_UPDATED:C,OVERWRITE_COMPONENTS:A,updateComponents:E,SETUP_COMPONENT:b,SETUP_ANSWER_STATE:k}=t(29933),{addPrompt:S}=t(90672),{addElement:N}=t(51777),g=t(63955),{trackableChange:f}=t(59828),{NavigationSideItem:w}=t(39819),{registerTrackingMap:y}=t(90876),T=t(63867),R=t(36998),x=t(98471),O=t(67718),{updateVariable:P}=t(66376),I=t(24156),{evaluateCourseAssessment:D,courseAssessmentComplete:B,courseAssessmentComponentsReset:M,courseAssessmentReset:$,EVALUATE_COURSE_ASSESSMENT:q,COURSE_ASSESSMENT_COMPLETE:F,SETUP_COURSE_ASSESSMENT_RETAKE:V,SHOW_COURSE_ASSESSMENT_CONFIRM_RESET_DIALOG:U}=t(36580),L=t(57587),Q=t(56219),H=t(50869),K=t(97646),j=(e,s)=>O(e,"_courseAssessment",s);s.registerElementsEpic=(e,s)=>e.filter(j(_,s)).mergeMap((()=>{const{course:e,components:t}=s.getState(),r=e._courseAssessment,a=I(r,t),i=[];if(i.push(N({parent:"menuItem",position:"content",name:"courseAssessment",component:H,props:{}})),r._shouldDisableAssessmentCompletedPopup||i.push(N({parent:"navigationSide",name:"courseAssessment",component:w,props:{link:"/courseAssessment/showResults",icon:x("_courseAssessment","_navigationIcon","pie-chart"),label:r.title}}),N({parent:"router",name:"courseAssessment",component:L,path:"/courseAssessment/showResults",exact:!0,getShouldPersist:e=>n(e,"course._courseAssessment._isEnabled",!1)})),r._shouldDisableQuestionFeedback){const e=o(a,((e,s)=>(e[s._id]={_canShowFeedback:!1},e)),{});i.push(E(e))}return u.of(...i)})),s.registerAssessmentComponentFeedbackEpic=(e,s)=>e.filter(j([_,A],s)).mergeMap((()=>{const{course:e,components:t}=s.getState(),n=e._courseAssessment,r=I(n,t);if(n._shouldDisableQuestionFeedback){const e=o(r,((e,s)=>(e[s._id]={_canShowFeedback:!1},e)),{});return u.of(E(e))}return u.empty()})),s.registerTrackingMapEpic=(e,s)=>e.filter(j(_,s)).do((()=>{y("courseAssessment",K,"extensions")})).ignoreElements(),s.evaluateAssessmentOnComponentCompletedEpic=(e,s)=>e.filter((e=>{if(!j(h,s)(e))return!1;const{courseAssessment:t}=s.getState();if(t._isComplete)return!1;const{componentId:n}=e.payload;return-1!==t.componentIds.indexOf(n)})).map((()=>D(s.getState()))),s.courseAssessmentCompleteEpic=(e,s)=>e.filter((e=>e.type===q&&s.getState().courseAssessment._isComplete)).mergeMap((()=>u.of(B(s.getState()),f()))),s.setVariableOnScoreChangedEpic=(e,s)=>e.ofType(q,F,C).filter((()=>{const{app:e,course:{_courseAssessment:t}}=s.getState();return e.hasAppStarted&&t&&t._isEnabled&&t._canSaveToVariable&&t._variableId&&t._canSaveToVariableOnScoreChange})).map((()=>s.getState().courseAssessment.score)).distinctUntilChanged().map((e=>{const{course:{_courseAssessment:t}}=s.getState();return P(t._variableId,e,t._variableUpdateType)})),s.setVariableOnAssessmentCompletedEpic=(e,s)=>e.ofType(q,F,C).filter((()=>{const{app:e,course:{_courseAssessment:t}}=s.getState();return e.hasAppStarted&&t&&t._isEnabled&&t._canSaveToVariable&&t._variableId&&!t._canSaveToVariableOnScoreChange})).map((()=>s.getState().courseAssessment._isComplete)).distinctUntilChanged().filter((e=>e)).map((()=>s.getState().courseAssessment.score)).distinctUntilChanged().map((e=>{const{course:{_courseAssessment:t}}=s.getState();return P(t._variableId,e,t._variableUpdateType)})),s.showAssessmentCompletedPromptEpic=(e,s)=>e.ofType(F).mergeMap((()=>{const{course:e,courseAssessment:t}=s.getState();if(e._courseAssessment._shouldDisableAssessmentCompletedPopup)return u.empty();let o={title:e._courseAssessment.completionNotifyTitle,body:e._courseAssessment.completionNotifyBody,_class:"course-assessment-notify",_actions:[],_glyph:{_type:"progressCircle",_percentage:t.score}};return e._courseAssessment._shouldDisplayOverviewInPopup&&(o={_component:p.createElement(Q,null),title:e._courseAssessment.completionNotifyTitle,body:e._courseAssessment.completionNotifyBody,_actions:[]}),n(e._courseAssessment,"_showAssessmentLinkInPopup",!0)&&o._actions.push({text:e._courseAssessment.title,_link:{_link:"courseAssessment/showResults",_linkType:"extensions"}}),!(e._courseAssessment._canBeRetaken&&e._courseAssessment._shouldShowRetakeAssessmentInPopup&&(e._courseAssessment._allowUnlimitedRetakeAttempts||t.retakeAttemptsTaken<e._courseAssessment._retakeAttempts))||t._isPassed&&e._courseAssessment._shouldHideRetakeOnAssessmentPassed||o._actions.push({text:e._courseAssessment.retakeAssessmentButtonText,_type:U}),u.of(S(o))})),s.confirmResetAssessmentDialogEpic=(e,s)=>e.filter(j(U,s)).map((()=>{const e=s.getState().course._courseAssessment,t={title:e.retakeAssessmentNotifyTitle,body:e.retakeAssessmentNotifyBody,_action:{text:e.retakeAssessmentNotifyConfirmButtonText,_type:V},_dismiss:{text:e.retakeAssessmentNotifyCancelButtonText}};return S(t)})),s.setupRetakeAssessmentEpic=(e,s,{Api:t})=>e.ofType(V).mergeMap((()=>u.concat(u.of($()),t.fetchComponents().map((e=>{const{courseAssessment:t,course:o,components:m}=s.getState(),u=n(o._courseAssessment,"_onlyResetIncorrect",!1),p=a((e=>i(e,"_attempts")),(e=>c({},e,function(e){const s={_isEnabled:!0,_isCorrect:!1,_isPartlyCorrect:!1,_isComplete:!1,_isSubmitted:!1,_hasUserAnswered:!1,_userAnswer:void 0,_attemptsLeft:void 0,_userFeedback:void 0};return"branching"===e._component&&(s._currentItemId=void 0,s._previousItems=[],s._score=0),s}(e))),(e=>g(e,{type:b,component:e,originalComponent:e})),(e=>g(e,{type:k,component:e,originalComponent:e}))),d=l(e).keyBy("_id").pick(u?r(t.componentIds,(e=>!m[e]._isCorrect)):t.componentIds).mapValues(p).value();return E(d)})),u.of(M(),v).do((()=>m((()=>{const e=s.getState(),{course:t,components:o}=e,r=t._courseAssessment,a=n(r,"_retakeNavigation","COURSE");if("COURSE"===a)d.replace("/");else if("ASSESSMENT_FIRST_QUESTION"===a||"ASSESSMENT_FIRST_QUESTION_PAGE"===a){const s=I(r,o),t=T(e,s[0],"page");let n=`/page/${t._id}`;"ASSESSMENT_FIRST_QUESTION"===a&&(n=`/page/${t._id}?element=${s[0]._id}`),d.replace(n)}if("LINK"===a){const e=n(r,"_retakeNavigationLink",{});e&&("course"===e._linkType?d.replace("/"):"extensions"===e._linkType||"additionalContent"===e._linkType?d.replace(`/${e._link}`):R(e._link))}})))))))},24156:(e,s,t)=>{"use strict";const n=t(90882),o=t(37936);e.exports=({_shouldIncludeAllQuestions:e},s)=>n(s,o(e?"_isQuestionType":"_courseAssessment._isEnabled",!0))},64147:(e,s,t)=>{"use strict";const n=t(16760),o=t(36402),r=t(13888),a=t(79421),{SETUP_APP:i,APP_READY:c}=t(63444),{COMPONENTS_UPDATED:l}=t(29933),{RESTORE_EXTENSION:m}=t(59828),u=t(24156),{EVALUATE_COURSE_ASSESSMENT:p,COURSE_ASSESSMENT_RESET:d,COURSE_ASSESSMENT_COMPLETE:v}=t(36580),_={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_progress:0,_shouldHideMarking:!1,componentsCount:0,completedComponentsCount:0,correctComponentsCount:0,retakeAttemptsTaken:0,totalAttemptsTaken:0,score:0,componentIds:[],_hasLoadedFromScorm:!1};function h(e,s){if(!e._isEnabled)return e;const{components:t,course:n}=s.payload,i=n._courseAssessment._passPercentage,c=r(t,e.componentIds),l=o(c);let m=0,u=0;a(c,(e=>{e._isComplete&&(m+=1,e._isCorrect&&(u+=1))}));const p=Math.round(u/l*100),d=l===m,v=d&&p>=i,_=100/l*m;return{...e,_isComplete:d,_isPassed:v,_progress:_,score:p,componentsCount:l,completedComponentsCount:m,correctComponentsCount:u}}e.exports=(e=_,s)=>{switch(s.type){case i:return function(e,s){const{course:t,components:r}=s.payload,a=t._courseAssessment;if(a&&a._isEnabled){const s=u(a,r),t=n(s,(e=>e._id)),i=o(s);return{...e,_isEnabled:!0,_shouldHideMarking:a._shouldHideMarking,componentIds:t,componentsCount:i,retakeAttemptsTaken:0,totalAttemptsTaken:0}}return _}(e,s);case c:return function(e,s){if(!e._isEnabled)return e;const{scorm:t}=s.payload;return t&&t._isEnabled&&!e._hasLoadedFromScorm&&(e=t.suspendData&&void 0!==t.suspendData._assessmentAttemptsTaken?{...e,retakeAttemptsTaken:t.suspendData._assessmentAttemptsTaken,_hasLoadedFromScorm:!0}:{...e,_hasLoadedFromScorm:!0}),h(e,s)}(e,s);case p:case l:return h(e,s);case d:return{...e,retakeAttemptsTaken:e.retakeAttemptsTaken+1};case v:return{...e,totalAttemptsTaken:e.totalAttemptsTaken+1};case m:if("courseAssessment"===s.payload.extensionName)return{...e,...s.payload.extensionData};default:return e}}},34956:(e,s,t)=>{"use strict";const n=t(60019),o=t(13888),{createSelector:r}=t(60985),a=e=>e.courseAssessment;s.courseAssessmentSelector=r([e=>e.course._courseAssessment,a],((e={},s={})=>n({},e,s))),s.courseAssessmentComponentsSelector=r([a,e=>e.components],((e,s)=>e?o(s,e.componentIds):{})),s.courseAssessmentStatusSelector=r(a,(e=>e._isComplete?e._isPassed?"pass":"fail":"incomplete"))},97646:e=>{"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"retakeAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0},_totalAssessmentAttemptsTaken:{fieldKey:"totalAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"score",type:"Number",shouldRestore:!0},_progress:{fieldKey:"_progress",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!1,shouldStoreOnTopLevel:!0},_assessmentCompletedQuestionsCount:{fieldKey:"completedComponentsCount",type:"Number",shouldRestore:!1,shouldStoreOnTopLevel:!0},_assessmentCorrectQuestionsCount:{fieldKey:"correctComponentsCount",type:"Number",shouldRestore:!1,shouldStoreOnTopLevel:!0}}},67718:(e,s,t)=>{"use strict";const n=t(72579);e.exports=(e,s,t)=>(Array.isArray(e)||(e=[e]),({type:o})=>-1!==e.indexOf(o)&&n(t.getState(),["course",s,"_isEnabled"],!1))},98471:(e,s,t)=>{"use strict";const n=t(72579),{store:o}=t(90876);e.exports=function(e,s,t){const{course:r,theme:a}=o.getState(),i=r[e],c=n(i,s),l=n(a,["_extensions",e,"_settings",s]);return c||l||t}},6443:(e,s,t)=>{"use strict";const n=t(72579),{Observable:o}=t(28761),{setLocationReadyState:r,PUSH_LOCATION:a}=t(63444),i=t(36151),c=t(69610);e.exports=(e,s)=>(t,l)=>t.filter((({type:s})=>{if(s!==a)return;const{navigationStatus:t,path:n}=l.getState().location;return"plugin"===t&&n[0]===e})).switchMap((()=>{const t=l.getState(),{device:a,course:m}=t;let u;if(u=s?s(t):n(m,[`_${e}`,"_heroImage"]),!u||!u._graphic)return o.empty();const p=i(u._graphic.src,u._graphic.srcAdvanced,!0);return p?o.concat(o.of(r(!1)),o.bindCallback(c)(p,!1).map((()=>r(!0)))):o.empty()}))},37936:(e,s,t)=>{var n=t(18874),o=t(74716);e.exports=function(e,s){return o(e,n(s,1))}}}]);